<html>

<!-- Mirrored from openbook.rheinwerk-verlag.de/linux_unix_programmierung/Kap18B-012.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 20:00:27 GMT -->
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Linux-UNIX-Programmierung – A.13 Netzwerkprogrammierung</title>
<meta name="title" content="Linux-UNIX-Programmierung">
<meta name="author" content="J&uuml;rgen Wolf">
<meta name="publisher" content="Rheinwerk Verlag GmbH 2006">
<meta name="copyright" content="Rheinwerk Verlag GmbH 2006">
<meta name="description" content="Linux-UNIX-Programmierung - Das umfassende Handbuch – 2., aktualisierte und erweiterte Auflage 2006 – ISBN 3-89842-749-8">
<meta name="audience" content="Alle">
<meta name="robots" content="INDEX,FOLLOW">
<meta http-equiv="content-language" content="de">
<link rel="stylesheet" type="text/css" href="common/rw_open.css">
<link rel="prev" href="Kap18B-011.html">
<link rel="next" href="Kap18B-013.html"><script type="text/javascript" language="JavaScript"><!--
function OpenWin(url,name,height,width)
{
  var InfoWin = window.open(url,name,"directories=0,height="+height+",width=" + width + ",hotkeys=0,location=0,menubar=0,resizable=1,screenX=150,screenY=10,left=150,top=10,scrollbars=1,status=1,titlebar=0,toolbar=0");
  InfoWin.focus();
}
//--></script></head>
<body vlink="#000099" link="#000099" alink="#000099">
<table width="100%" height="74" border="0" cellpadding="0" cellspacing="0" bgcolor="#00549d">
<tr>
<td height="74" valign="bottom" colspan="2"><a href="https://www.rheinwerk-verlag.de/openbook/?GPP=oplup"><img src="common/rw_openbook.gif" width="200" height="56" border="0" alt="Rheinwerk Computing < openbook >"></a></td>
<td width="80" height="74">
<a href="https://www.rheinwerk-verlag.de/?GPP=oplup"><img src="common/rw_computing.gif" border="0" alt="Rheinwerk Computing - Professionelle B&uuml;cher. Auch f&uuml;r Einsteiger."></a>
</td>
</tr>
</table><div align="right"><a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navnav">Professionelle B&uuml;cher. Auch f&uuml;r Einsteiger</a></div><br /><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td width="156" valign="top"><table border="0" cellpadding="0" cellspacing="0" width="100%" align="left">
<tr>
<td colspan="2" class="nav1" align="left" valign="top" height="150">
<table class="tbl1" width="150" border="0" cellpadding="3" cellspacing="0">
<tr>
<td class="tbl2" height="25"><A class="nav" href="index-2.html">Inhaltsverzeichnis</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap00a-000.html#Xxx999195">Vorwort des Autors</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap00b-000.html#Xxx999195">Vorwort der Fachgutachter</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap01-000.html#Xxx999235">1 Einf&uuml;hrung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap02-000.html#Xxx999234">2 E/A-Funktionen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap03-000.html#Xxx999234">3 Attribute von Dateien und Verzeichnissen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap04-000.html#Xxx999234">4 Zugriff auf Systeminformationen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap05-000.html#Xxx999234">5 Devices – eine einfache Verbindung zur Hardware</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap06-000.html#Xxx999234">6 System- und Benutzerdateien</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap07-000.html#Xxx999234">7 D&auml;monen, Zombies und Prozesse</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap08-000.html#Xxx999235">8 Signale</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap09-000.html#Xxx999235">9 IPC – Interprozesskommunikation</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap10-000.html#Xxx999234">10 Threads</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap11-000.html#Xxx999235">11 Netzwerkprogrammierung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap12-000.html#Xxx999236">12 MySQL und PostgreSQL</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap13-000.html#Xxx999235">13 Terminal E/A und Benutzerschnittstellen f&uuml;r die Konsole</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap14-000.html#Xxx999235">14 Xlib – X Window-Programmierung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap15-000.html#Xxx999235">15 GTK+</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap16-000.html#Xxx999235">16 SDL</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap17-000.html#Xxx999247">17 Werkzeuge f&uuml;r Programmierer</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18A-000.html#Xxx999248">A Sicherheit unter Linux</A></td>
</tr>
<tr>
<td><A class="navnavh" href="Kap18B-000.html#Xxx999245">B Funktionsreferenz</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18C-000.html#Xxx999245">C Inhalt der Buch-CD</A></td>
</tr>
<tr>
<td><A class="navnav" href="stichwort.html#Xxx537584">Index</A></td>
</tr>
<tr><td><br /><!--<a class="navnav" href="http://download.galileo-press.de/openbook/lup/galileocomputing_linux_unix_programmierung.zip"><strong>Download:</strong><br />- ZIP, ca. 4,3 MB</a></td></tr>
<tr><td><a class="navnav" href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup">Buch bestellen</a></td></tr>
<tr><td>--><a class="navnav" href="https://www.rheinwerk-verlag.de/feedback/">Ihre Meinung?</a><br /><br /></td></tr>
</table></td>
</tr>

</table>
</td>
<td width="10"><img src="common/spacer10.gif" width="10" height="10"></td>
<td width="85%" valign="top" align="center">
<div align="center">
<table width="98%" border="0" cellspacing="0" cellpadding="0" bgcolor="#FFFFFF">
<tr>
<td width="100%" class="start" colspan="1" height="22" align="center">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20%"><a class="navnav" href="Kap18B-011.html"> &lt;&lt; zur&uuml;ck</a></td>
<td width="59%">
<div align="center"><a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navnav">Rheinwerk Computing /</a><a class="navnav" href="https://www.rheinwerk-verlag.de/openbook/?GPP=oplup"> &lt;openbook&gt; /</a> <a href="index-2.html" class="navnav"> Linux-UNIX-Programmierung</a></div>
</td>
<td align="right" width="20%">
<div align="right"><a class="navnav" href="Kap18B-013.html">vor &gt;&gt; </a></div>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="100%" valign="top">
<table width="100%" border="0" cellpadding="10" cellspacing="0" class="box">
<tr>
<td colspan="2"><a href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup" class="buchtitel">Linux-UNIX-Programmierung</a><span class="autor"> von J&uuml;rgen Wolf</span><br><span class="untertitel">Das umfassende Handbuch – 2., aktualisierte und erweiterte Auflage 2006</span></td>
</tr>
<tr>
<td valign="top" width="90"><a href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup"><img src="common/9783898427494.gif" border="0" alt="Buch: Linux-UNIX-Programmierung" title="Buch: Linux-UNIX-Programmierung" align="left"><br /><br /><span class="autor"><strong>Linux-UNIX-Programmierung</strong><br />1216 S., mit CD, 49,90 Euro<br />Rheinwerk Computing<br />ISBN 3-89842-749-8</span></a></a></td>
<td width="80%">
<table border="0">
<tr>
<td valign="baseline"><img src="common/pfeil_u.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="3" class="kap"><b>Kapitel <a href="Kap18B-000.html#RxxKap18B000040006D31F040100">A Funktionsreferenz</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-000.html#RxxKap18B000040006D31F040103">B.1 ANSI C</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-001.html#RxxKap18B001040006F01F048100">B.2 ANSI C99</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-002.html#RxxKap18B002040006F11F027100">B.3 Elementare E/A-Funktionen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-003.html#RxxKap18B003040006F21F025100">B.4 Fortgeschrittene Ein-/Ausgabe-Funktionen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-004.html#RxxKap18B004040006F31F046100">B.5 Verzeichnisse</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-005.html#RxxKap18B005040006F41F034100">B.6 Attribute von Dateien und Verzeichnissen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-006.html#RxxKap18B006040006F51F043100">B.7 Links</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-007.html#RxxKap18B007040006F61F016100">B.8 Prozess und Prozessverwaltungsfunktionen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-008.html#RxxKap18B008040006F71F017100">B.9 Signale – Das neue Signalkonzept</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-009.html#RxxKap18B009040006F81F04C100">B.10 Interprozesskommunikationen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-010.html#RxxKap18B010040006F91F034100">B.11 Sys-V-Interprozesskommnunikationen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-011.html#RxxKap18B011040006FA1F027100">B.12 Threadprogrammierung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a class="navh2" href="#RxxKap18B012040006FB1F029100">B.13 Netzwerkprogrammierung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-013.html#RxxKap18B013040006FC1F04F100">B.14 MySQL C-API</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-014.html#RxxKap18B014040006FD1F049100">B.15 PostgreSQL C-API</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap18B-015.html#RxxKap18B015040006FE1F030100">B.16 Weitere Funktionsreferenzen auf der Buch-CD</a></b></td>
</tr>
</table><br></td>
</tr>
</table>
<table width="100%" cellpadding="20" cellspacing="0" border="0" bgcolor="#eeeeee">
<tr>
<td>
<a name="t21"></a><a name="t2t31"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div>
<h2 class="t2">B.13 Netzwerkprogrammierung<a id="RxxKap18B012040006FB1F029100" name="RxxKap18B012040006FB1F029100"></a> 
      <a href="#t2t32"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><img src="common/15x15leer.gif" width="15" height="15" border="0" alt="top"></h2>
<a name="t31"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t32"></a><h3 class="t3">B.13.1 Grundlegende Socket-Funktionen<a id="RxxKap18B012040006FB1F029101" name="RxxKap18B012040006FB1F029101"></a> 
      <a href="#t2t33"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t31"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p>Die gleich folgenden Funktionen zur Socket-Programmierung ben&ouml;tigen alle die Headerdateien:</p>
<pre>#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;<a id="Xxx999249" name="Xxx999249"></a></pre>
<p>Des-Weiteren wird eine Struktur namens <span class="listing">sockaddr</span> verwendet, die wie folgt definiert ist:</p>
<pre>struct sockaddr {
    sa_family_t  sa_family;   /* address family, AF_xxx       */
    char         sa_data[14]; /* 14 bytes of protocol address */
 };</pre>
<p>Diese Struktur l&auml;sst sich allerdings recht unbequem ausf&uuml;llen (gemeint sind damit Portnummer und Internet-Adresse in der Strukturvariable <span class="listing">sa_data</span>), weshalb es f&uuml;r IP-Anwendungen eine spezielle Struktur daf&uuml;r gibt:</p>
<pre>struct sockaddr_in {
    sa_family_t sin_family;         /* Address-Familie  */
    unsigned short int sin_port;    /* Portnummer       */
    struct in_addr sin_addr;        /* Internet-Adresse */
};</pre>
<p><span class="listing">sockaddr_in</span> erm&ouml;glicht es Ihnen, die IP-Adresse sowie die Portnummer getrennt einzutragen. Im Speicher sind diese beiden Strukturen kompatibel, es reicht also eine einfache Typumwandlung, um die gew&uuml;nschten Informationen zu &uuml;bergeben.</p>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<caption class="tabunter">
<p><span class="tabunter"><b>Tabelle B.68   
    </b>Grundlegende Socket-Funktionen</span></p>
</caption>
<tr>
<td class="tabellenkopf" bgcolor="#000000"><b>Syntax</b>
</td>
<td class="tabellenkopf" bgcolor="#000000"><b>Bedeutung</b>
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int socket<a id="Xxx999261" name="Xxx999261"></a> ( int domain,
       int type,
       int protocol );
</td>
<td class="tabellentext" bgcolor="#000000">Einen Socket (Endpunkt) zur Kommunikation anlegen
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int bind<a id="Xxx999266" name="Xxx999266"></a> (
  int s,
  const struct sockaddr *name,
  int namelen );
</td>
<td class="tabellentext" bgcolor="#000000">Ein Socket mit einer Adresse verkn&uuml;pfen (Server)
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int listen<a id="Xxx999271" name="Xxx999271"></a>(int s, int backlog);
</td>
<td class="tabellentext" bgcolor="#000000">Am Socket horchen – auf eine Verbindung warten
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int accept<a id="Xxx999276" name="Xxx999276"></a> (
  int s,
  struct sockaddr *addr,
  int *addrlen );
</td>
<td class="tabellentext" bgcolor="#000000">Eintreffende Verbindungsw&uuml;nsche bearbeiten
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int connect<a id="Xxx999281" name="Xxx999281"></a> (
  int s,
  const struct sockaddr *name,
  int namelen );
</td>
<td class="tabellentext" bgcolor="#000000">Eine Verbindung zum Server herstellen (Client)
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">ssize_t send<a id="Xxx999286" name="Xxx999286"></a> (
  int s,
  const void *msg,
  size_t len,
  int flags );
</td>
<td class="tabellentext" bgcolor="#000000">Versenden von Daten &uuml;ber ein Socket
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">ssize_t sendto<a id="Xxx999291" name="Xxx999291"></a> (
  int s,
  const void *msg,
  size_t len,
  int flags,
  const struct sockaddr *to,
  int tolen );
</td>
<td class="tabellentext" bgcolor="#000000">Versenden von Daten &uuml;ber ein Socket (wird vorwiegend mit dem UDP-Protokoll verwendet)
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">ssize_t recv<a id="Xxx999296" name="Xxx999296"></a> (
  int s,
  void *buf,
  size_t len,
  int flags );
</td>
<td class="tabellentext" bgcolor="#000000">Empfangen von Daten &uuml;ber ein Socket
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">ssize_t recvfrom<a id="Xxx999301" name="Xxx999301"></a> (
  int s,
  void *buf,
  size_t len,
  int flags,
  struct sockaddr *from,
  int *fromlen );
</td>
<td class="tabellentext" bgcolor="#000000">Empfangen von Daten &uuml;ber ein Socket (wird vorwiegend mit dem UDP-Protokoll verwendet)
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int getsockopt<a id="Xxx999306" name="Xxx999306"></a> (
  int s,
  int level,
  int optname,
  void *optval,
  int *optlen );
</td>
<td class="tabellentext" bgcolor="#000000">Erfragen von Optionen f&uuml;r Sockets
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int setsockopt<a id="Xxx999311" name="Xxx999311"></a> (
  int s,
  int level,
  int optname,
  const void *optval,
  int optlen );
</td>
<td class="tabellentext" bgcolor="#000000">Setzen von Optionen f&uuml;r Sockets
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int socketpair<a id="Xxx999316" name="Xxx999316"></a>(
  int d,
  int type,
  int protocol,
  int sv[2]); 
</td>
<td class="tabellentext" bgcolor="#000000">Der Aufruf socketpair() generiert zwei unbenannte, miteinander verbundene Sockets. d bezeichnet die Domain, typ den Typ der Sockets und protocol definiert das Protokoll, das nicht angegeben werden muss. Die Deskriptoren der Sockets werden in sv[0] und sv[1] zur&uuml;ckgegeben. Die beiden Sockets k&ouml;nnen nicht unterschieden werden. Die Sematik der Funktion entspricht dem Syscall pipe().
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int shutdown<a id="Xxx999321" name="Xxx999321"></a>(int s, int how);
</td>
<td class="tabellentext" bgcolor="#000000">shutdown() beendet eine ganze Voll-Duplex-Verbindung oder einen Teil einer Voll-Duplex-Verbindung, die mit dem Socket s verbunden ist. Ist how=0, so werden weitere empfangene Nachrichten abgelehnt. Ist how=1 , so werden weitere zu sendende Nachrichten abgelehnt. Ist how=2 , so werden zu sendende und empfangene Nachrichten abgelehnt.
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int getpeername<a id="Xxx999326" name="Xxx999326"></a>(
  int s,
  struct sockaddr *name,
  int *namelen );
</td>
<td class="tabellentext" bgcolor="#000000">getperrname() liefert zu einem gegebenen Socket s die Adresse des entfernten Endes. name ist ein Zeiger auf einen Speicherplatz, an dem das System die Adresse ablegen kann und namelen teilt dem System mit, wie viel Platz vorhanden ist. Daran erkennt es, welche Art von Adresse man erwartet. Da es sich um einen Wert/Ergebnis-Parameter handelt, muss er vorbelegt werden und unbedingt auf einen schreibbaren Speicherplatz zeigen.
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int getsockname<a id="Xxx999331" name="Xxx999331"></a>(
   int s,
   struct sockaddr *name,
   int *namelen);
</td>
<td class="tabellentext" bgcolor="#000000">getsockname() liefert zu einem gegebenen Socket s die Adresse des lokalen Endes. name ist ein Zeiger auf einen Speicherplatz, an dem das System die Adresse ablegen kann und namelen teilt dem System mit, wie viel Platz vorhanden ist. Daran erkennt es, welche Art von Adresse man erwartet. Da es sich um einen Wert/Ergebnis-Parameter handelt, muss er vorbelegt werden und unbedingt auf einen schreibbaren Speicherplatz zeigen.
</td>
</tr>
</table><br>
<a name="t32"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t33"></a><h3 class="t3">B.13.2 Konvertieren zur richtigen Byteanordnung<a id="RxxKap18B012040006FB1F02918E" name="RxxKap18B012040006FB1F02918E"></a> 
      <a href="#t2t34"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t32"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p>Es gibt verschiedene Architekturen, in denen sich die Anordnung der Bytereihenfolge beim Abspeichern einer Zahl unterscheiden. Generell wird dabei zwischen Big Endian und Little Endian unterschieden. Beim Big Endian wird das h&ouml;chstwertige Byte an der niedrigsten Adresse gespeichert, das zweith&ouml;chste an der n&auml;chsten Adressen und so weiter. Bei der Anordnung von Little Endian ist dies genau umgekehrt. Dabei wird das niedrigstwertige Byte an der niedrigsten Stelle gespeichert, das zweitniedrigste an der n&auml;chsten Stelle usw.</p>
<p>Damit sich jetzt aber alle Rechner untereinander verstehen, hat man sich auf eine einheitliche Daten&uuml;bertragung mit Big Endian (auch als network-byte-order bezeichnet) geeinigt. Um jetzt aus einer lokal verwendeten Byte-Reihenfolge (host-byte-order) eine network-byte-order-Reihenfolge und umgekehrt zu konvertieren, stehen Ihnen die folgenden Funktionen zur Verf&uuml;gung, welche alle die Headerdatei <span class="listing">&lt;netinet/in.h&gt;<a id="Xxx999346" name="Xxx999346"></a></span> ben&ouml;tigen.</p>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<caption class="tabunter">
<p><span class="tabunter"><b>Tabelle B.69   
    </b>Funktionen zur Konvertieren der richtigen Byteanordnung</span></p>
</caption>
<tr>
<td class="tabellenkopf" bgcolor="#000000"><b>Syntax</b>
</td>
<td class="tabellenkopf" bgcolor="#000000"><b>Bedeutung</b>
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">uint32_t htonl<a id="Xxx999353" name="Xxx999353"></a>(uint32_t);
</td>
<td class="tabellentext" bgcolor="#000000">Konvertiert einen 32 Bit-Wert im host-byte-order zu einem 32 Bit-Wert im network-byte-order
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">uint16_t htons<a id="Xxx999358" name="Xxx999358"></a>(uint16_t);
</td>
<td class="tabellentext" bgcolor="#000000">Konvertiert einen 16 Bit-Wert im host-byte-order zu einem 16 Bit-Wert im network-byte-order
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">uint32_t ntohl<a id="Xxx999363" name="Xxx999363"></a>(uint32_t);
</td>
<td class="tabellentext" bgcolor="#000000">Konvertiert einen 32 Bit-Wert im network-byte-order zu einem 32 Bit-Wert im host-byte-order
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">uint16_t ntohs<a id="Xxx999368" name="Xxx999368"></a>(uint16_t);
</td>
<td class="tabellentext" bgcolor="#000000">Konvertiert einen 32 Bit-Wert im network-byte-order zu einem 32 Bit-Wert im host-byte-order
</td>
</tr>
</table><br>
<a name="t33"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t34"></a><h3 class="t3">B.13.3 Abfragen von Netzwerknummern und Internetadressen<a id="RxxKap18B012040006FB1F02919E" name="RxxKap18B012040006FB1F02919E"></a> 
      <a href="#t2t35"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t33"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p>Zur Verwendung der folgenden Funktionen sind folgende Headerdateien n&ouml;tig:</p>
<pre>#include &lt;netinet/in.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;arpa/inet.h&gt;<a id="Xxx999383" name="Xxx999383"></a></pre>
<p>Des Weiteren wird die Struktur <span class="listing">in_addr</span> verwendet, welche sich auch in der Headerdatei <span class="listing">sockaddr_in</span> wieder findet:</p>
<pre>struct sockaddr_in {
  /* Adressfamilie normalerweise AF_INET  */
  short int          sin_family;
  /* Port der Verbindung                  */
  unsigned short int sin_port;
  /* Adresse zu der Verbunden werden soll */
  struct in_addr     sin_addr;
  /* Fuelldaten um auf 14 Bytes zu kommen */
  unsigned char      sin_zero[8]; 
};
struct in_addr{
     unsigned long int sin_addr;
}</pre>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<caption class="tabunter">
<p><span class="tabunter"><b>Tabelle B.70   
    </b>Funktionen zum Abfragen von Netzwerknummern und Internetadressen</span></p>
</caption>
<tr>
<td class="tabellenkopf" bgcolor="#000000"><b>Syntax</b>
</td>
<td class="tabellenkopf" bgcolor="#000000"><b>Bedeutung</b>
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int inet_aton<a id="Xxx999392" name="Xxx999392"></a> (
  const char *name,
  struct in_addr *addr );
</td>
<td class="tabellentext" bgcolor="#000000">Konvertiert den String in der Punktierten Dezimaldarstellung (bspw. 127.0.0.1) in eine 32 Bit-Internetadresse.
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">uint32_t inet_network<a id="Xxx999397" name="Xxx999397"></a> (
  const char *name );
</td>
<td class="tabellentext" bgcolor="#000000">Extrahiert aus der als punktierten Dezimaldarstellung die Netzwerknummer.
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">char * inet_ntoa<a id="Xxx999402" name="Xxx999402"></a> (
  struct in_addr addr );
</td>
<td class="tabellentext" bgcolor="#000000">Konvertiert die &uuml;bergebene 32 Bit-Adresse, die im network-byte-order vorliegen muss, in eine punktierte Dezimaldarstellung als String.
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">struct in_addr inet_makeaddr<a id="Xxx999407" name="Xxx999407"></a> (
  uint32_t net,
  uint32_t local );
</td>
<td class="tabellentext" bgcolor="#000000">Generiert aus dem lokalen Teil eines Rechners und einer Netzwerknummer eine numerische IP-Adresse.
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">uint32_t inet_lnaof<a id="Xxx999412" name="Xxx999412"></a> (
  struct in_addr addr );
</td>
<td class="tabellentext" bgcolor="#000000">Ermittelt die Adresse des lokalen Teils (bspw. 127.0.0.1 -&gt; der lokale Teil = 0.0.0.1) des Rechners. Die Funktion gibt diesen Wert in Form eines 32 Bit-Wertes im host-byte-order zur&uuml;ck.
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">uint32_t inet_netof<a id="Xxx999417" name="Xxx999417"></a> (
  struct in_addr addr );
</td>
<td class="tabellentext" bgcolor="#000000">Konvertiert eine numerische 32 –Bit-Darstellung der IP-Adresse, die als Parameter angegeben wird, in eine Netzwerknummer, die im host-byte-order zur&uuml;ckgegeben wird
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">int inet_pton<a id="Xxx999422" name="Xxx999422"></a> (
      int af,
      const char *cp,
      void *buf );
</td>
<td class="tabellentext" bgcolor="#000000">Wie inet_aton() nur werden damit neben IPv4- auch IPv6-Adressen unterst&uuml;tzt.
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">const char * inet_ntop<a id="Xxx999427" name="Xxx999427"></a> (
      int af,
      const void *cp,
      char *buf,
      size_t len);
</td>
<td class="tabellentext" bgcolor="#000000">Wie inet_ntoa() nur werden damit neben IPv4- auch IPv6-Adressen unterst&uuml;tzt.
</td>
</tr>
</table><br>
<a name="t34"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t35"></a><h3 class="t3">B.13.4 Hostnamen aus der Host-Datenbank ermitteln<a id="RxxKap18B012040006FB1F0291B8" name="RxxKap18B012040006FB1F0291B8"></a> 
      <a href="#t2t36"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t34"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p>Die Funktionen in diesem Abschnitt ben&ouml;tigen die folgenden Headerdateien:</p>
<pre>#include &lt;sys/socket.h&gt;
#include &lt;netdb.h&gt;<a id="Xxx999442" name="Xxx999442"></a></pre>
<p>Die Struktur <span class="listing">hostent</span> ist ein Datentyp, der einen Eintrag in der Host-Datenbank repr&auml;sentiert und folgende Mitglieder besitzt:</p>
<pre>struct hostent { 
    char *  h_name; 
    char ** h_aliases; 
    short   h_addrtype; 
    short   h_length; 
    char ** h_addr_list; 
 };</pre>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<caption class="tabunter">
<p><span class="tabunter"><b>Tabelle B.71   
    </b>Funktionen, um auf die Host-Datenbank zuzugreifen</span></p>
</caption>
<tr>
<td class="tabellenkopf" bgcolor="#000000"><b>Syntax</b>
</td>
<td class="tabellenkopf" bgcolor="#000000"><b>Bedeutung</b>
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">struct hostent * gethostbyname<a id="Xxx999451" name="Xxx999451"></a> (
     const char *name );
</td>
<td class="tabellentext" bgcolor="#000000">Ermittelt die IP-Adresse (z. B. 192.0.34.72) passend zum angegebenen Internet-Host-Namen (z. B. www.example.com)
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">struct hostent * gethostbyaddr<a id="Xxx999456" name="Xxx999456"></a> (
     const char *addr,
     size_t length,
     int format );
</td>
<td class="tabellentext" bgcolor="#000000">Ermittelt den Internet-Host-Namen (z. B. www.example.com) passend zur angegebenen IP-Adresse (z. B. 192.0.34.72)
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">struct hostent * gethostbyname2<a id="Xxx999461" name="Xxx999461"></a>(
   const char *name,
   int af );
</td>
<td class="tabellentext" bgcolor="#000000">Ermittelt die IP-Adresse (z. B. 192.0.34.72) passend zum angegebenen Internet-Host-Namen (z. B. www.example.com) – Der neu hinzugekommene Parameter af bezeichnet die gew&uuml;nschte Adressfamilie AF_INET oder AF_INET6.
</td>
</tr>
</table><br>
<a name="t35"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t36"></a><h3 class="t3">B.13.5 Service-Datenbank<a id="RxxKap18B012040006FB1F0291C8" name="RxxKap18B012040006FB1F0291C8"></a> 
      <img src="common/15x15leer.gif" width="15" height="15" border="0" alt="top"><a href="#t2t35"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p>Die Funktionen in diesem Abschnitt ben&ouml;tigen die folgende Headerdatei:</p>
<pre>#include &lt;netdb.h&gt;<a id="Xxx999475" name="Xxx999475"></a></pre>
<p>Die Struktur <span class="listing">servent</span> ist ein Datentyp, der einen Eintrag in der Service-Datenbank repr&auml;sentiert und folgende Mitglieder besitzt:</p>
<pre>struct    servent {
          char *s_name;       /* official name of service */
          char **s_aliases;   /* alias list               */
          int  s_port;        /* port service resides at  */
          char *s_proto;      /* protocol to use          */
      };</pre>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<caption class="tabunter">
<p><span class="tabunter"><b>Tabelle B.72   
    </b>Funktionen zum Zugriff auf die Service-Datenbank</span></p>
</caption>
<tr>
<td class="tabellenkopf" bgcolor="#000000"><b>Syntax</b>
</td>
<td class="tabellenkopf" bgcolor="#000000"><b>Bedeutung</b>
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">struct servent * getservbyname<a id="Xxx999485" name="Xxx999485"></a> (
   const char *name,
   const char *proto );
</td>
<td class="tabellentext" bgcolor="#000000">Ermittelt einen Port-Wert passend zu einem Internet-Dienst und Protokoll.
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">struct servent * getservbyport<a id="Xxx999490" name="Xxx999490"></a> (
     int port,
     const char *proto );
</td>
<td class="tabellentext" bgcolor="#000000">Ermittelt einen Internet-Dienst passend zu einem Port und Protokoll.
</td>
</tr>
</table><br>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="100%" class="start" colspan="1" height="22" align="center">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20%"><a class="navnav" href="Kap18B-011.html"> &lt;&lt; zur&uuml;ck</a></td>
<td width="59%">
<div align="center"><a class="navnav" href="#">&lt;top&gt;</a></div>
</td>
<td align="right" width="20%">
<div align="right"><a class="navnav" href="Kap18B-013.html">vor &gt;&gt; </a></div>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</td>
<td width="10" valign="top">&nbsp;&nbsp;</td>
<td width="160" valign="top">
    <table border="0" cellpadding="0" cellspacing="0" width="160">
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2">
                            &nbsp;<a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navs">
                            <strong>Zum Katalog</strong></a>
                        </td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2">
                            <img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td><a href="https://www.rheinwerk-verlag.de/linux-unix-programmierung_1137/?GPP=oplup">
                                        <img src="common/749.gif"  border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-UNIX-Programmierung" title="Zum Katalog: Linux-UNIX-Programmierung">
                                        <br /><strong>Linux-UNIX-<br />Programmierung</strong><br /><img src="common/pfeil_rechts5.gif" border="0" alt="">bestellen</a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2"><strong>&nbsp;Ihre Meinung?</strong></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td>Wie hat Ihnen das &lt;openbook&gt; gefallen?<br /><a href="https://www.rheinwerk-verlag.de/feedback/"><img src="common/pfeil_rechts5.gif" border="0" alt="">Ihre Meinung</a>
                                    <br /><br /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2">&nbsp;<a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navs"><strong>Buchtipps</strong></a></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux-server_3685/?GPP=oplup">
                        <img src="common/3020.gif" width="78" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-Server" title="Zum Katalog: Linux-Server"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux-Server</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/das-komplettpaket-lpic-1-lpic-2_3782/?GPP=oplup">
                        <img src="common/3529.gif" width="70" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Das Komplettpaket LPIC-1 &amp; LPIC-2" title="Zum Katalog: Das Komplettpaket LPIC-1 &amp; LPIC-2"><br /><br /><br /><br /><br /><br /><br />&nbsp;Das Komplettpaket<br />&nbsp;LPIC-1 &amp; LPIC-2</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux-hochverfugbarkeit_3420/?GPP=oplup">
                        <img src="common/2542.gif" width="70" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-Hochverfügbarkeit" title="Zum Katalog: Linux-Hochverfügbarkeit"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux-<br />&nbsp;Hochverfügbarkeit</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/shell-programmierung_3345/?GPP=oplup">
                        <img src="common/2310.gif" width="69" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Shell-Programmierung" title="Zum Katalog: Shell-Programmierung"><br /><br /><br /><br /><br /><br /><br />&nbsp;Shell-<br />&nbsp;Programmierung</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux_3436/?GPP=oplup">
                        <img src="common/2591.gif" width="79" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux Handbuch" title="Zum Katalog: Linux Handbuch"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux Handbuch</a><br /><br /></td>
                    </tr>
                </table></td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2"><strong>&nbsp;Shopping</strong></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td><b>Versandkostenfrei</b> bestellen in Deutschland und &Ouml;sterreich<br /><a href="https://www.rheinwerk-verlag.de/hilfe/bestellung_6?GPP=oplup"><img src="common/pfeil_rechts5.gif" border="0" alt="">Info</a><br /><br /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</td>
</tr>
</table>
<br /><br />
<hr width="70%" align="center">
<br />
<div align="center">
    <p class="standard">
        <strong>Copyright © Rheinwerk Verlag GmbH 2006</strong>
        <br />F&uuml;r Ihren privaten Gebrauch d&uuml;rfen Sie die Online-Version nat&uuml;rlich 
        ausdrucken. Ansonsten unterliegt das &lt;openbook&gt; denselben Bestimmungen, 
        wie die gebundene Ausgabe: Das Werk einschlie&szlig;lich aller seiner Teile ist 
        urheberrechtlich gesch&uuml;tzt. Alle Rechte vorbehalten einschlie&szlig;lich der 
        Vervielf&auml;ltigung, &Uuml;bersetzung, Mikroverfilmung sowie Einspeicherung und 
        Verarbeitung in elektronischen Systemen.
    </p>
    <br><a href="https://www.rheinwerk-verlag.de/">[Rheinwerk Computing]</a>
    <br /><br />Rheinwerk Verlag GmbH, Rheinwerkallee 4, 53227 Bonn, 
    Tel.: 0228.42150.0, Fax 0228.42150.77, 
    <a href="mailto:service@rheinwerk-verlag.de">service@rheinwerk-verlag.de</a>
</div>
<br /><br />
</body>

<!-- Mirrored from openbook.rheinwerk-verlag.de/linux_unix_programmierung/Kap18B-012.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 20:00:27 GMT -->
</html>
