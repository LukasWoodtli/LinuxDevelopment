<html>

<!-- Mirrored from openbook.rheinwerk-verlag.de/linux_unix_programmierung/Kap14-006.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 19:58:39 GMT -->
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Linux-UNIX-Programmierung – 14.7 Text mit X</title>
<meta name="title" content="Linux-UNIX-Programmierung">
<meta name="author" content="J&uuml;rgen Wolf">
<meta name="publisher" content="Rheinwerk Verlag GmbH 2006">
<meta name="copyright" content="Rheinwerk Verlag GmbH 2006">
<meta name="description" content="Linux-UNIX-Programmierung - Das umfassende Handbuch – 2., aktualisierte und erweiterte Auflage 2006 – ISBN 3-89842-749-8">
<meta name="audience" content="Alle">
<meta name="robots" content="INDEX,FOLLOW">
<meta http-equiv="content-language" content="de">
<link rel="stylesheet" type="text/css" href="common/rw_open.css">
<link rel="prev" href="Kap14-005.html">
<link rel="next" href="Kap14-007.html"><script type="text/javascript" language="JavaScript"><!--
function OpenWin(url,name,height,width)
{
  var InfoWin = window.open(url,name,"directories=0,height="+height+",width=" + width + ",hotkeys=0,location=0,menubar=0,resizable=1,screenX=150,screenY=10,left=150,top=10,scrollbars=1,status=1,titlebar=0,toolbar=0");
  InfoWin.focus();
}
//--></script></head>
<body vlink="#000099" link="#000099" alink="#000099">
<table width="100%" height="74" border="0" cellpadding="0" cellspacing="0" bgcolor="#00549d">
<tr>
<td height="74" valign="bottom" colspan="2"><a href="https://www.rheinwerk-verlag.de/openbook/?GPP=oplup"><img src="common/rw_openbook.gif" width="200" height="56" border="0" alt="Rheinwerk Computing < openbook >"></a></td>
<td width="80" height="74">
<a href="https://www.rheinwerk-verlag.de/?GPP=oplup"><img src="common/rw_computing.gif" border="0" alt="Rheinwerk Computing - Professionelle B&uuml;cher. Auch f&uuml;r Einsteiger."></a>
</td>
</tr>
</table><div align="right"><a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navnav">Professionelle B&uuml;cher. Auch f&uuml;r Einsteiger</a></div><br /><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td width="156" valign="top"><table border="0" cellpadding="0" cellspacing="0" width="100%" align="left">
<tr>
<td colspan="2" class="nav1" align="left" valign="top" height="150">
<table class="tbl1" width="150" border="0" cellpadding="3" cellspacing="0">
<tr>
<td class="tbl2" height="25"><A class="nav" href="index-2.html">Inhaltsverzeichnis</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap00a-000.html#Xxx999195">Vorwort des Autors</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap00b-000.html#Xxx999195">Vorwort der Fachgutachter</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap01-000.html#Xxx999235">1 Einf&uuml;hrung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap02-000.html#Xxx999234">2 E/A-Funktionen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap03-000.html#Xxx999234">3 Attribute von Dateien und Verzeichnissen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap04-000.html#Xxx999234">4 Zugriff auf Systeminformationen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap05-000.html#Xxx999234">5 Devices – eine einfache Verbindung zur Hardware</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap06-000.html#Xxx999234">6 System- und Benutzerdateien</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap07-000.html#Xxx999234">7 D&auml;monen, Zombies und Prozesse</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap08-000.html#Xxx999235">8 Signale</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap09-000.html#Xxx999235">9 IPC – Interprozesskommunikation</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap10-000.html#Xxx999234">10 Threads</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap11-000.html#Xxx999235">11 Netzwerkprogrammierung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap12-000.html#Xxx999236">12 MySQL und PostgreSQL</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap13-000.html#Xxx999235">13 Terminal E/A und Benutzerschnittstellen f&uuml;r die Konsole</A></td>
</tr>
<tr>
<td><A class="navnavh" href="Kap14-000.html#Xxx999235">14 Xlib – X Window-Programmierung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap15-000.html#Xxx999235">15 GTK+</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap16-000.html#Xxx999235">16 SDL</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap17-000.html#Xxx999247">17 Werkzeuge f&uuml;r Programmierer</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18A-000.html#Xxx999248">A Sicherheit unter Linux</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18B-000.html#Xxx999245">B Funktionsreferenz</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18C-000.html#Xxx999245">C Inhalt der Buch-CD</A></td>
</tr>
<tr>
<td><A class="navnav" href="stichwort.html#Xxx537584">Index</A></td>
</tr>
<tr><td><br /><!--<a class="navnav" href="http://download.galileo-press.de/openbook/lup/galileocomputing_linux_unix_programmierung.zip"><strong>Download:</strong><br />- ZIP, ca. 4,3 MB</a></td></tr>
<tr><td><a class="navnav" href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup">Buch bestellen</a></td></tr>
<tr><td>--><a class="navnav" href="https://www.rheinwerk-verlag.de/feedback/">Ihre Meinung?</a><br /><br /></td></tr>
</table></td>
</tr>

</table>
</td>
<td width="10"><img src="common/spacer10.gif" width="10" height="10"></td>
<td width="85%" valign="top" align="center">
<div align="center">
<table width="98%" border="0" cellspacing="0" cellpadding="0" bgcolor="#FFFFFF">
<tr>
<td width="100%" class="start" colspan="1" height="22" align="center">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20%"><a class="navnav" href="Kap14-005.html"> &lt;&lt; zur&uuml;ck</a></td>
<td width="59%">
<div align="center"><a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navnav">Rheinwerk Computing /</a><a class="navnav" href="https://www.rheinwerk-verlag.de/openbook/?GPP=oplup"> &lt;openbook&gt; /</a> <a href="index-2.html" class="navnav"> Linux-UNIX-Programmierung</a></div>
</td>
<td align="right" width="20%">
<div align="right"><a class="navnav" href="Kap14-007.html">vor &gt;&gt; </a></div>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="100%" valign="top">
<table width="100%" border="0" cellpadding="10" cellspacing="0" class="box">
<tr>
<td colspan="2"><a href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup" class="buchtitel">Linux-UNIX-Programmierung</a><span class="autor"> von J&uuml;rgen Wolf</span><br><span class="untertitel">Das umfassende Handbuch – 2., aktualisierte und erweiterte Auflage 2006</span></td>
</tr>
<tr>
<td valign="top" width="90"><a href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup"><img src="common/9783898427494.gif" border="0" alt="Buch: Linux-UNIX-Programmierung" title="Buch: Linux-UNIX-Programmierung" align="left"><br /><br /><span class="autor"><strong>Linux-UNIX-Programmierung</strong><br />1216 S., mit CD, 49,90 Euro<br />Rheinwerk Computing<br />ISBN 3-89842-749-8</span></a></a></td>
<td width="80%">
<table border="0">
<tr>
<td valign="baseline"><img src="common/pfeil_u.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="3" class="kap"><b>Kapitel <a href="Kap14-000.html#RxxKap14000040004981F014100">14 Xlib – X Window-Programmierung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-000.html#RxxKap14000040004981F014105">14.1 Architektur von X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-000.html#RxxKap14000040004981F01410F">14.1.1 Pufferung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-000.html#RxxKap14000040004981F014114">14.1.2 Ressourcen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-001.html#RxxKap14001040004B51F018100">14.2 X Toolkit</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-002.html#RxxKap14002040004B61F03B100">14.3 Der Window-Manager</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-003.html#RxxKap14003040004B71F042100">14.4 Fenster mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-003.html#RxxKap14003040004B71F04210E">14.4.1 Verbindung herstellen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-003.html#RxxKap14003040004B71F042117">14.4.2 Fenster definieren</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-003.html#RxxKap14003040004B71F042177">14.4.3 Informationen f&uuml;r den Window-Manager</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-003.html#RxxKap14003040004B71F04217B">14.4.4 Fenster anzeigen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-003.html#RxxKap14003040004B71F042180">14.4.5 Fenster und X-Verbindung beenden</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-003.html#RxxKap14003040004B71F042183">14.4.6 Das Grundger&uuml;st als Quellcode</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-004.html#RxxKap14004040004B81F029100">14.5 Events</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F029104">14.5.1 Event-Maske setzen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F029180">14.5.2 Event-Bearbeitungsschleife</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F029187">14.5.3 Abarbeitung der Events</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F02918A">14.5.4 Tastatur-Event</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F029190">14.5.5 Mausbutton-Event</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F0291A2">14.5.6 Expose-Event</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F0291A6">14.5.7 EnterWindowMask – LeaveWindowMask</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F0291A8">14.5.8 Listing zu den Events</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-005.html#RxxKap14005040004B91F038100">14.6 Grafik mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-005.html#RxxKap14005040004B91F038105">14.6.1 Grafikprimitive – Zeichenfunktionen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a class="navh2" href="#RxxKap14006040004BA1F040100">14.7 Text mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14006040004BA1F040102">14.7.1 Fonts benutzen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14006040004BA1F04010E">14.7.2 &Uuml;bersicht zu den Fonts</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14006040004BA1F040181">14.7.3 H&ouml;he und Breite ermitteln</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14006040004BA1F040187">14.7.4 Listing mit Textausgabe</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-007.html#RxxKap14007040004BB1F032100">14.8 Farben mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-008.html#RxxKap14008040004BC1F019100">14.9 Beispiel – ein Button mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-009.html#RxxKap14009040004BD1F036100">14.10 Wozu kann ich denn nun die Xlib in der Praxis verwenden?</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-010.html#RxxKap14010040004BE1F03A100">14.11 X und X-Toolkits – Einf&uuml;hrung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-011.html#RxxKap14011040004BF1F01F100">14.12 Toolkit-Programmierung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-011.html#RxxKap14011040004BF1F01F103">14.12.1 Widgets</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-012.html#RxxKap14012040004C01F020100">14.13 Ein einfaches Fenster mit einem Button</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-012.html#RxxKap14012040004C01F02010E">14.13.1 Ressourcen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-013.html#RxxKap14013040004C11F018100">14.14 Zwei Buttons in Box- und Form-Widget mit Textausgabe (Label-Widget)</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-014.html#RxxKap14014040004C21F037100">14.15 editres – Widget-Hierarchie</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-015.html#RxxKap14015040004C31F020100">14.16 Texteingabe mit Dialog-Widget</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-016.html#RxxKap14016040004C41F01E100">14.17 X-Toolkits meets Xlib</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-017.html#RxxKap14017040004C51F045100">14.18 Zusammenfassung</a></b></td>
</tr>
</table><br></td>
</tr>
</table>
<table width="100%" cellpadding="20" cellspacing="0" border="0" bgcolor="#eeeeee">
<tr>
<td>
<a name="t21"></a><a name="t2t31"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div>
<h2 class="t2">14.7 <a id="RxxKap14143TextmitX" name="RxxKap14143TextmitX"></a>Text mit<a id="RxxKap14006040004BA1F040100" name="RxxKap14006040004BA1F040100"></a> X 
      <a href="#t2t32"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><img src="common/15x15leer.gif" width="15" height="15" border="0" alt="top"></h2>
<p><a id="Xxx999236" name="Xxx999236"></a><a id="Xxx999237" name="Xxx999237"></a>Unter X haben Sie die M&ouml;glichkeit, aus einer unz&auml;hligen Menge von Schriften zu w&auml;hlen. Standardm&auml;&szlig;ig wird immer der ASCII-Zeichensatz unterst&uuml;tzt (Zeichen Nr. 20 bis 126) – aber h&auml;ufig finden dabei auch die ausl&auml;ndischen Schriftzeichen zwischen 128 und 255 Platz. F&uuml;r jede Schriftgr&ouml;&szlig;e wird ein eigener Font ben&ouml;tigt, was dazu f&uuml;hrt, dass eine enorme Menge an Fonts vorhanden ist (auf meinem Rechner sind dies ca. 3200). Jeder Font, der gerade verwendet wird, besitzt eine eigene Kennungs-ID, die im Grafikkontext gespeichert wird. Somit ben&ouml;tigen Sie auch f&uuml;r die Ausgabe von Schriften den Grafikkontext <span class="listing">GC</span>.</p>
<a name="t31"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t32"></a><h3 class="t3">14.7.1 Fonts benutzen<a id="RxxKap14006040004BA1F040102" name="RxxKap14006040004BA1F040102"></a> 
      <a href="#t2t33"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t31"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999240" name="Xxx999240"></a>Standardm&auml;&szlig;ig verwendet der Grafikkontext eine voreingestellte Schriftart. Sofern Sie eine andere Schriftart verwenden wollen, m&uuml;ssen Sie diese erst laden. Folgende Schritte sind dazu n&ouml;tig:</p>
<table width="100%" border="0">
<tr>
<td valign="top" width="10"><b>1.</b></td>
<td valign="top" width="100%" align="left"> Font mit der Funktion XLoadFont() laden:</td>
</tr>
<tr>
<td valign="baseline" width="16">
                 
            </td>
<td valign="top" width="100%" align="left">
                 
            </td>
</tr>
</table>
Display *display;
Font font;
...
font = XLoadFont (display, fontname);
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16">
             
        </td>
<td valign="top" width="100%" align="left">Als R&uuml;ckgabewert erhalten Sie eine Kennungs-ID <span class="listing">font</span> vom Typ <span class="listing">Font</span>, die Sie f&uuml;r weitere Funktionsaufrufe ben&ouml;tigen werden. <span class="listing">fontname</span> ist ein String mit einer bestimmten Schriftart. Hierbei ist auch z. B. <span class="listing">"*normal--10*"</span> erlaubt – dann sucht sich der Server einfach irgendeine Schriftart normaler Dicke mit 10 Pixel H&ouml;he aus.</td>
</tr>
<tr>
<td valign="baseline" width="16">
                 
            </td>
<td valign="top" width="100%" align="left">
                 
            </td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="top" width="10"><b>2.</b></td>
<td valign="top" width="100%" align="left"> Font (Schriftart) im Grafikkontext GC eintragen (Font setzen):</td>
</tr>
<tr>
<td valign="baseline" width="16">
                 
            </td>
<td valign="top" width="100%" align="left">
                 
            </td>
</tr>
</table>
Display *display; 
GC mygc;
Font font;
...
XSetFont (display, mygc, font);
<table width="100%" border="0">
<tr>
<td valign="top" width="10"><b>3.</b></td>
<td valign="top" width="100%" align="left"> Text mit der Funktion XDrawString() oder XDrawImageString() ausgeben:</td>
</tr>
<tr>
<td valign="baseline" width="16">
                 
            </td>
<td valign="top" width="100%" align="left">
                 
            </td>
</tr>
</table>
Display *display; 
Window win; 
GC mygc;
int x, y, len;
char *text;
...
XDrawString (display, win, mygc, x, y, text, len);
XDrawImageString (display, win, mygc, x, y, text, len);
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16">
             
        </td>
<td valign="top" width="100%" align="left"><span class="listing">text</span> ist eine beliebige Stringvariable oder -konstante, die ASCII-Text (ohne Steuerzeichen o. &Auml;.) enth&auml;lt. <span class="listing">len</span> (Integer) muss die L&auml;nge von <span class="listing">text</span> enthalten, selbst wenn <span class="listing">text</span> sauber mit 0 terminiert ist. <span class="listing">x</span>, <span class="listing">y</span> sind die Koordinaten des Textes relativ zur linken oberen Fensterecke. <span class="listing">x</span>, <span class="listing">y</span> beziehen sich auf die Grundlinie der Schrift – z. B. auf die Ecke links unten vom Buchstaben <span class="listing">E</span>. Beide Funktionen benutzen als Textfarbe die im <span class="listing">GC</span> eingetragene Vordergrundfarbe.</td>
</tr>
<tr>
<td valign="baseline" width="16">
                 
            </td>
<td valign="top" width="100%" align="left">
                 
            </td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16">
             
        </td>
<td valign="top" width="100%" align="left">Der Unterschied der beiden Funktionen liegt darin, dass <span class="listing">XDrawString()</span> im Gegensatz zu <span class="listing">XDrawImageString()</span> nicht die Hintergrundfarbe verwendet, auf die der Grafikkontext <span class="listing">GC</span> eingestellt ist, sondern den Hintergrund als durchsichtig betrachtet.</td>
</tr>
<tr>
<td valign="baseline" width="16">
                 
            </td>
<td valign="top" width="100%" align="left">
                 
            </td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="top" width="10"><b>4.</b></td>
<td valign="top" width="100%" align="left"> Font (Speicher) wieder freigeben mit: XUnloadFont (display, font).</td>
</tr>
<tr>
<td valign="baseline" width="16">
                 
            </td>
<td valign="top" width="100%" align="left">
                 
            </td>
</tr>
</table>
<a name="t32"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t33"></a><h3 class="t3">14.7.2 &Uuml;bersicht zu den Fonts<a id="RxxKap14006040004BA1F04010E" name="RxxKap14006040004BA1F04010E"></a> 
      <a href="#t2t34"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t32"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999261" name="Xxx999261"></a>Wenn Sie sich einen &Uuml;berblick &uuml;ber alle Schriftarten (Fonts) auf Ihrem System machen wollen, verwenden Sie am besten das X-Tool xlsfonts (mit einer Pipe &uuml;ber less). Gew&ouml;hnlich ist der Name einer Schriftart wie folgt aufgebaut:</p>
<pre>...
-adobe-courier-medium-r-normal--8–80–75–75-m-50-iso8859–4
-adobe-courier-medium-r-normal--8–80–75–75-m-50-iso8859–9
-adobe-helvetica-bold-o-normal--10–100–75–75-p-60-iso10646–1
-adobe-helvetica-bold-o-normal—10–100–75–75-p-60-iso8859–1
...</pre>
<p>Es gibt auch noch einige &auml;ltere Schriftarten, die nicht mit dem Minuszeichen am Anfang beginnen. Folgende Bedeutung haben die einzelnen Felder getrennt durch '<span class="listing">-</span>' (leeres Feld ist somit '<span class="listing">--</span>'):</p>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Hersteller der Schrift: <span class="listing">adobe</span>, <span class="listing">sony</span>, <span class="listing">schumacher</span>, <span class="listing">b&amp;h</span>, <span class="listing">bitstream</span>, (<span class="listing">misc</span>)</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Schrifttyp-Familie: <span class="listing">times</span>, <span class="listing">courier</span>, <span class="listing">helvetica</span>, <span class="listing">new</span> <span class="listing">century</span> <span class="listing">schoolbook</span>, <span class="listing">fixed</span>, <span class="listing">symbol</span>, <span class="listing">lucida</span>, <span class="listing">lucidabright</span>, <span class="listing">lucidatypewriter</span>, <span class="listing">open</span> <span class="listing">look</span> <span class="listing">glyph</span></td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Dicke des Schrifttyps: <span class="listing">bold</span>, <span class="listing">demibold</span>, <span class="listing">light</span>, <span class="listing">medium</span>, <span class="listing">clean</span></td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Neigung der Schrift: <span class="listing">r</span> f&uuml;r roman, <span class="listing">i</span> f&uuml;r italic, <span class="listing">o</span> f&uuml;r oblique</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> keine Serifen: <span class="listing">sans</span></td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Zeichenh&ouml;he der Schrift in Pixel: <span class="listing">10</span>, <span class="listing">12</span>, <span class="listing">13</span>, <span class="listing">16</span>, <span class="listing">19</span> ...</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Der sog. Schriftgrad in Zehntelpunkten (= 0.023 mm), d. h. die vom Bildschirm unabh&auml;ngige Zeichengr&ouml;&szlig;e: <span class="listing">100</span>, <span class="listing">120</span>, <span class="listing">190</span> ...</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> horizontale/vertikale Aufl&ouml;sung (in dpi): <span class="listing">75–75</span>, <span class="listing">100–100</span> ...</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Zeichenabstand der Schrift: <span class="listing">p</span> f&uuml;r proportional, <span class="listing">m</span> f&uuml;r monospaced</td>
</tr>
</table>
<p>Nat&uuml;rlich l&auml;sst sich diese Liste der Schriftarten auch mit einer X-Funktion, n&auml;mlich mit <span class="listing">XListFonts()<a id="Xxx999275" name="Xxx999275"></a></span>, ermitteln:</p>
<pre>    Display *display;
    char *mask;
    char **list;
    int count;
    ...
    list=XListFonts(mydisplay, mask, 1000, &amp;count);
    ...
    XFreeFontNames(list);</pre>
<p><span class="listing">mask</span> ist ein String, womit Sie bestimmte Schriften herausfiltern k&ouml;nnen, z. B.:</p>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"><span class="listing"> "*"</span> – Alle Schriftarten ausw&auml;hlen</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"><span class="listing"> "*adobe*"</span> – Nur Schriftarten von Adobe ausw&auml;hlen</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"><span class="listing"> "*italic*"</span> – Nur Italic-Schriftarten ausw&auml;hlen</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"><span class="listing"> "*times*"</span> – Nur Schriften vom Typ Times ausw&auml;hlen</td>
</tr>
</table>
<p>In <span class="listing">count</span> befindet sich die Anzahl der gefundenen Schriftarten, die Sie mit dem dritten Parameter begrenzen k&ouml;nnen. In diesem Fall werden max. 1000 Schriftarten ermittelt – egal wie viele noch existieren. Im Stringarray <span class="listing">list</span> befinden sich alle Namen, worauf Sie jetzt mit dem Index – z. B. um eine Schriftart zu laden – zur&uuml;ckgreifen k&ouml;nnen:</p>
<pre>font=XLoadFont(display, list[5]);</pre>
<p>Um den Speicher der Liste wieder freizugeben, sollten Sie die Funktion <span class="listing">XFreeFontNames()</span> verwenden.</p>
<a name="t33"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t34"></a><h3 class="t3">14.7.3 H&ouml;he und Breite ermitteln<a id="RxxKap14006040004BA1F040181" name="RxxKap14006040004BA1F040181"></a> 
      <a href="#t2t35"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t33"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999286" name="Xxx999286"></a><a id="Xxx999287" name="Xxx999287"></a>Um einen Text auch ordentlich auf dem Bildschirm platzieren zu k&ouml;nnen, ben&ouml;tigt man Informationen &uuml;ber die Breite und H&ouml;he der Schrift. Die H&ouml;he ist unabh&auml;ngig vom eigentlichen Text und nur durch den Font festgelegt. Zahlreiche Gr&ouml;&szlig;eninformationen (in Pixel) &uuml;ber einen Font erhalten Sie &uuml;ber die Struktur <span class="listing">XFontStruct<a id="Xxx999289" name="Xxx999289"></a><a id="Xxx999290" name="Xxx999290"></a></span>:</p>
<pre>   Display *display;
   XFontStruct *fontinfo;
   ...
   fontinfo=XQueryFont(display,font);
   printf("ascent: %d   descent: %d\n",
      (*fontinfo).ascent, (*fontinfo).descent);</pre>
<p>Die Struktur <span class="listing">XFontStruct</span> enth&auml;lt u. a. die beiden Variablen <span class="listing">ascent</span>, welche die H&ouml;he &uuml;ber der Grundlinie (mit Platz nach oben) anzeigt, und <span class="listing">descent</span>, die angibt, wie viel Platz nach unten hin gebraucht wird (mit Platz nach unten). Somit erhalten Sie die gesamte H&ouml;he durch die Summe der beiden Zahlen. Mehrzeiliger Text kann einfach mit diesem Abstand ausgegeben werden.</p>
<p>Die Breite h&auml;ngt (bei Proportionalschriften) nat&uuml;rlich vom konkreten Text ab. Auch hierf&uuml;r gibt es eine Funktion, die ebenfalls die Struktur <span class="listing">XFontStruct</span> ben&ouml;tigt:<a id="Xxx999294" name="Xxx999294"></a></p>
<pre>    XFontStruct *fontinfo;
    char *text;
    int len,width;
    ...
    width=XTextWidth(fontinfo, text,len);</pre>
<a name="t34"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t35"></a><h3 class="t3">14.7.4 Listing mit Textausgabe<a id="RxxKap14006040004BA1F040187" name="RxxKap14006040004BA1F040187"></a> 
      <img src="common/15x15leer.gif" width="15" height="15" border="0" alt="top"><a href="#t2t34"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p>Das folgende Listing stellt eine Erweiterung des Listings vom Beispiel zuvor dar, nur dass die Funktionen, mit denen die Grafikprimitiven erstellt wurden, nun auch als Beschreibung mit ausgegeben werden. Au&szlig;erdem wird mit einem rechten Mausklick ein Zufallsfont aus der Fontliste geladen, und alle (falls m&ouml;glich) 255 Zeichen werden ausgegeben. Bei erneutem Rechtsklick werden wieder zuf&auml;llige Fonts geladen und angezeigt. Die Anzahl der vorhandenen Fonts wird auf der Konsole ausgegeben.</p>
<pre><a id="Xxx999298" name="Xxx999298"></a>/* xfont.c */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;X11/keysym.h&gt;
#include &lt;X11/Xlib.h&gt;
#include &lt;X11/Xutil.h&gt;
#include "my_delay.h"
#define WINDOW_WIDTH 600
#define WINDOW_HEIGHT 450
/* Funktionsprototypen */
static int create_window (void);
static void process_event (XEvent report);
static void eventloop (void);
static void close_window (void);
extern int delay (int i);
extern int time_diff (void);
static void draw_graphics (void);
static void print_text (GC, int, int, char *, char *);
static void print_font_demo (void);
/* Globale Variablen */
static unsigned int width, height;
static Display *display;
static int screen;
static int depth;
static Window win; 
/* Schriftarten */
static char *my_fonts[] = {
   "-adobe-times-bold-r-normal--18*",
   "-adobe-times-bold-r-normal--12*",
   "-b&amp;h-lucida-medium-r-normal-*-*-180-*-*-*-*-*-*",
   "-*-times-*-*-*-*-*-240-*-*-*-*-*-*"
};
enum { ADOBE_BOLD_18, ADOBE_BOLD_12, LUCIA_NORMAL, TIMES };
/* Funktion erzeugt ein Fenster */
static int create_window (void) {
  char *window_name = "Fontdemo";
  char *icon_name   = "window";
  static XSizeHints size_hints;
  Window rootwin;
  width = WINDOW_WIDTH;
  height = WINDOW_HEIGHT;
  /* X-Sitzung &ouml;ffnen */
  display = XOpenDisplay (NULL);
  /* Fehler&uuml;berpr&uuml;fung */
  if (display == NULL) {
    printf ("Verbindung zum X-Server fehlgeschlagen?!?\n");
    exit(EXIT_FAILURE);
  }
  /* Standardbildschirm eines Displays */
  screen = XDefaultScreen (display);
  /* Standardtiefe des Screens - Anzahl der Ebenen */
  depth = XDefaultDepth (display, screen);
  rootwin = RootWindow (display, screen);
  win = XCreateSimpleWindow ( display, rootwin, 10, 10,
                              width, height, 5,
                              BlackPixel (display, screen),
                              WhitePixel (display, screen) );
  size_hints.flags = PSize | PMinSize | PMaxSize;
  size_hints.min_width =  width;
  size_hints.max_width =  width;
  size_hints.min_height = height;
  size_hints.max_height = height;
  XSetStandardProperties ( display, win, window_name, icon_name,
                           None, 0, 0, &amp;size_hints );
  XSelectInput (display, win,
                ButtonPressMask | KeyPressMask | ExposureMask );
  XMapWindow (display, win);
  return 1;
}
static void close_window (void) {
  XCloseDisplay (display);
}
static void eventloop (void) {
  XEvent xev;
  int num_events;
  XFlush (display);
  num_events = XPending (display);
  while ((num_events != 0)) {
    num_events--;
    XNextEvent (display, &amp;xev);
    process_event (xev);
  }
}
static void process_event (XEvent report) {
  switch (report.type) {
  case Expose:      /* Expose-Event =&gt; Bild zeichnen */
    if (report.xexpose.count == 0) {
      draw_graphics ();
    }
    break;
  case KeyPress:
    printf ("Tastaturaktion\n");
    break;
  case ButtonPressMask:
    /* Rechte Maustaste gedr&uuml;ckt? */
    if (report.xbutton.button == 3)
      print_font_demo ();
    else
      printf ("Mausaktion\n");
    break;
  default:
    break;
  }
}
static void draw_graphics (void) {
  GC mygc;                      /* neu: Grafikkontext */
  unsigned long black, white;   /* Nummern der Farben */
  int i;
  XPoint punkte[50];            /* Punkteschar */
  XPoint poly[4];               /* 4 Punkte fuer Polygon */
  /* Ein paar Felder belegen                   */
  /* Eine Schr&auml;ge mithilfe von Punkten zeichnen */
  for (i = 0; i &lt; 50; i++) {
    punkte[i].x = 470 + i;
    punkte[i].y = 200 + i;
  }
  /* geschlossenes Dreieck */
  poly[0].x = 200;
  poly[0].y = 200;   
  poly[1].x = 300;
  poly[1].y = 300;
  poly[2].x = 400;
  poly[2].y = 200;
  poly[3].x = 200;
  poly[3].y = 200;
  /* Fenster oben drauf anzeigen */
  XMapRaised (display, win);   
  /* Farbnummern besorgen */
  black = BlackPixel (display, screen);
  white = WhitePixel (display, screen);
  /* Graphical Context erzeugen, Farben eintragen */
  mygc = XCreateGC (display, win, 0, 0);
  XSetForeground (display, mygc, black);
  XSetBackground (display, mygc, white);
  /* sicherheitshalber alles l&ouml;schen */
  XClearWindow (display, win);
  /* Ein Rechteck zeichnen */
  XDrawRectangle (display, win, mygc, 10, 50, 50, 50);
  print_text (mygc, 10, 320, "1. XDrawRectangle()",
     my_fonts[ADOBE_BOLD_12]);
  /* Einen rechteckigen Bereich mit Farbe f&uuml;llen */
  XFillRectangle (display, win, mygc, 110, 50, 50, 50);
  print_text (mygc, 110, 240, "2. XFillRectangle()",
     my_fonts[ADOBE_BOLD_12]);
  /* Einen Kreis zeichnen */
  XDrawArc (display, win, mygc, 210, 50, 50, 50, 0, 360 * 64);
  print_text (mygc, 210, 320, "3. XDrawArc()",
    my_fonts[ADOBE_BOLD_12]);
  /* Einen Kreisbereich f&uuml;llen */
  XFillArc (display, win, mygc, 310, 50, 50, 50, 0, 360 * 64);
  print_text (mygc, 310, 240, "4. XFillArc()",
    my_fonts[ADOBE_BOLD_12]);
  /* Eine Ellipse zeichnen */
  XDrawArc (display, win, mygc, 410, 50, 60, 40, 0, 360 * 64);
  print_text (mygc, 410, 320, "5. XDrawArc()",
    my_fonts[ADOBE_BOLD_12]);
  /* Einen Ellipsenbereich f&uuml;llen */
  XFillArc (display, win, mygc, 510, 50, 60, 40, 0, 360 * 64);
  print_text (mygc, 510, 240, "6. XFillArc()",
    my_fonts[ADOBE_BOLD_12]);
  /* Einen Halbkreis zeichnen */
  XDrawArc (display, win, mygc, 10, 200, 60, 40, 90*64, 180*64);
  print_text (mygc, 10, 480, "7. XDrawArc()",
    my_fonts[ADOBE_BOLD_12]);
  /* Einen Halbkreis f&uuml;llen */
  XFillArc (display,win, mygc, 110, 200, 60, 40, 90*64, 180*64);
  print_text (mygc, 110, 380, "8. XFillArc()",
    my_fonts[ADOBE_BOLD_12]);
 /* ausgefuelltes Polygon bzw. Dreieck */
  XFillPolygon(display, win, mygc, poly, 4, 0, CoordModeOrigin);
  print_text (mygc, 250, 520, "9. XFillPolygon()",
     my_fonts[ADOBE_BOLD_12]);
  /* Eine schr&auml;ge Linie mit Punkten */
  XDrawPoints (display, win, mygc, punkte, 50, CoordModeOrigin);
  print_text (mygc, 470, 380, "10. XDrawPoints()",
     my_fonts[ADOBE_BOLD_12]);
  print_text (mygc, 150, 590,
    "Mit rechter Maustaste zum Font-Demo",
    my_fonts[ADOBE_BOLD_18] );
  XFlush (display);
  XFreeGC (display, mygc); 
}
static void
print_text (GC mygc, int x, int y, char *string, char *myfonts){
  Font myfont;      /* Schriftarten */
  char *fname = myfonts;
  /* Schriftart laden */
  myfont = XLoadFont (display, fname); 
 /* im Grafikkontext eintragen */
  XSetFont (display, mygc, myfont);   
  XDrawString ( display, win, mygc, x, y - 200,
                string, strlen (string) );
  /* Schriftart wieder freigeben */
  XUnloadFont (display, myfont);   
}
static void print_font_demo (void) {
  int fcount;                /* Zahl der Fonts von XListFont  */
  char **fontlist;           /* Zeiger auf Feld mit Fontnamen */
  Font headerfont, myfont;   /* Textfonts                     */
  int fontnr;                /* Fontnummer                    */
  char *fname;               /* Text mit Fontnamen            */
  char clist[256];           /* 256 Zeichen                   */
  XFontStruct *fontinfo, *headerinfo;   /* Fontinformationen  */
  int headerlength;          /* Textlaenge Header             */
  int headerwidth;           /* Textbreite Header             */
  int headerheight;          /* Hoehe des Header-Fonts        */
  int fontheight;            /* Hoehe des Zufallsfonts        */
  int width;             /* Breite des Textes mit Zufallsfont */
  int i;
  GC mygc;
  mygc = XCreateGC (display, win, 0, 0);
  /* Fontliste holen */
  fontlist = XListFonts (display, "*", 5000, &amp;fcount);
  printf ("%d Schriften gefunden!\n", fcount);
  /* Fenster loeschen */
  XClearWindow (display, win);   
  /* Schriftart fuer die Ueberschrift */
  headerfont = 
     XLoadFont (display, "-adobe-times-bold-r-normal--18*");
  headerinfo = XQueryFont (display, headerfont);
  headerheight = (*headerinfo).ascent + (*headerinfo).descent;
  for (i = 0; i &lt; 256; i++)
    clist[i] = i;   /* 256 ASCII-Zeichen definieren */
  /* zufaelligen Font mit modulo! */
  fontnr = (rand ()) % fcount;
  /* das ist sein Name */
  fname = fontlist[fontnr];   
  /* Header schreiben:  Name des Fonts zentriert oben        */
  /*                    mit Schrifttyp = headerfont          */
  headerlength = strlen (fname);       /* Laenge des Headers */
  XSetFont (display, mygc, headerfont);/* Header-Font setzen */
  headerwidth = XTextWidth (headerinfo, fname, headerlength);
  XDrawString ( 
     display, win, mygc,        /* Header darstellen */
     (600 - headerwidth)/2, headerheight*3/2, /* x,y */
               fname, headerlength  );
  /* clist mit 256 Zeichen schreiben in neuer Schrift        */
  myfont = XLoadFont (display, fname);         /* Font laden */
  fontinfo = XQueryFont (display, myfont); /* Infos besorgen */
  XSetFont (display, mygc, myfont);       /* in GC eintragen */
  fontheight = (*fontinfo).ascent + (*fontinfo).descent;
  for (i = 0; i &lt; 4; i++) {
    width = XTextWidth (fontinfo, &amp;clist[64 * i], 64);
    XDrawString (
       display, win, mygc,
       (600 - width)/2, (3*headerheight+i*fontheight),
        &amp;clist[64*i], 64 );
  }
  print_text (mygc, 150, 590,
     "Mit rechter Maustaste neue Schrift laden",
     my_fonts[ADOBE_BOLD_18]);
  XUnloadFont (display, myfont); 
  XFreeGC (display, mygc);
}
 
 int main (int argc, char **argv) {
  int quit = 0;
  int pause = 0;
  int td;
  create_window ();
  gettimeofday (&amp;st, NULL);
  while (!quit) {
    gettimeofday (&amp;rt, NULL);
    td = time_diff ();
    pause = delay (FRAME_LEN - td + pause);
    st = rt;
    eventloop ();
  }
  close_window ();
  return EXIT_SUCCESS;
}</pre>
<p>Das Programm bei der Ausf&uuml;hrung:</p>
<pre>$ gcc -o xfont xfont.c -L/usr/X11R6/lib -lX11
$ ./xfont</pre>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td class="tabellentext">
<p><a name="bild"></a><a href="#bild" onClick="OpenWin('bilder/14_3.gif','Abbildung',600,600)"><img border="0" src="bilderklein/klein14_3.gif" alt="Abbildung"><br><span class="tabunter">Hier klicken, um das Bild zu vergr&ouml;&szlig;ern</span></a></p>
<p class="tabunter"><b>Abbildung 14.3   
    </b>Textausgabe im X-Fenster</p>
</td>
</tr>
</table><br>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td class="tabellentext">
<p><a name="bild"></a><a href="#bild" onClick="OpenWin('bilder/14_4.gif','Abbildung',600,600)"><img border="0" src="bilderklein/klein14_4.gif" alt="Abbildung"><br><span class="tabunter">Hier klicken, um das Bild zu vergr&ouml;&szlig;ern</span></a></p>
<p class="tabunter"><b>Abbildung 14.4   
    </b>Ausgabe eines kompletten Zeichensatzes</p>
</td>
</tr>
</table><br>
<p>Im Beispiel sehen Sie &uuml;brigens auch, warum es unbedingt n&ouml;tig ist, in der Praxis die Breite der Fonts zu ermitteln. Bei der zuf&auml;lligen Ausgabe von Fonts werden viele gr&ouml;&szlig;ere Schriften nicht komplett am Bildschirm angezeigt. Man sollte die Breite der einzelnen Zeichen addieren und darauf achten, dass dabei die Breite des Fensters nicht &uuml;berschritten wird. Sobald die Summe der einzelnen Zeichen mehr als die Breite des Fensters ist, sollte man in der n&auml;chsten Zeile mit der Ausgabe fortfahren.</p>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="100%" class="start" colspan="1" height="22" align="center">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20%"><a class="navnav" href="Kap14-005.html"> &lt;&lt; zur&uuml;ck</a></td>
<td width="59%">
<div align="center"><a class="navnav" href="#">&lt;top&gt;</a></div>
</td>
<td align="right" width="20%">
<div align="right"><a class="navnav" href="Kap14-007.html">vor &gt;&gt; </a></div>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</td>
<td width="10" valign="top">&nbsp;&nbsp;</td>
<td width="160" valign="top">
    <table border="0" cellpadding="0" cellspacing="0" width="160">
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2">
                            &nbsp;<a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navs">
                            <strong>Zum Katalog</strong></a>
                        </td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2">
                            <img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td><a href="https://www.rheinwerk-verlag.de/linux-unix-programmierung_1137/?GPP=oplup">
                                        <img src="common/749.gif"  border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-UNIX-Programmierung" title="Zum Katalog: Linux-UNIX-Programmierung">
                                        <br /><strong>Linux-UNIX-<br />Programmierung</strong><br /><img src="common/pfeil_rechts5.gif" border="0" alt="">bestellen</a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2"><strong>&nbsp;Ihre Meinung?</strong></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td>Wie hat Ihnen das &lt;openbook&gt; gefallen?<br /><a href="https://www.rheinwerk-verlag.de/feedback/"><img src="common/pfeil_rechts5.gif" border="0" alt="">Ihre Meinung</a>
                                    <br /><br /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2">&nbsp;<a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navs"><strong>Buchtipps</strong></a></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux-server_3685/?GPP=oplup">
                        <img src="common/3020.gif" width="78" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-Server" title="Zum Katalog: Linux-Server"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux-Server</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/das-komplettpaket-lpic-1-lpic-2_3782/?GPP=oplup">
                        <img src="common/3529.gif" width="70" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Das Komplettpaket LPIC-1 &amp; LPIC-2" title="Zum Katalog: Das Komplettpaket LPIC-1 &amp; LPIC-2"><br /><br /><br /><br /><br /><br /><br />&nbsp;Das Komplettpaket<br />&nbsp;LPIC-1 &amp; LPIC-2</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux-hochverfugbarkeit_3420/?GPP=oplup">
                        <img src="common/2542.gif" width="70" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-Hochverfügbarkeit" title="Zum Katalog: Linux-Hochverfügbarkeit"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux-<br />&nbsp;Hochverfügbarkeit</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/shell-programmierung_3345/?GPP=oplup">
                        <img src="common/2310.gif" width="69" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Shell-Programmierung" title="Zum Katalog: Shell-Programmierung"><br /><br /><br /><br /><br /><br /><br />&nbsp;Shell-<br />&nbsp;Programmierung</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux_3436/?GPP=oplup">
                        <img src="common/2591.gif" width="79" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux Handbuch" title="Zum Katalog: Linux Handbuch"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux Handbuch</a><br /><br /></td>
                    </tr>
                </table></td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2"><strong>&nbsp;Shopping</strong></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td><b>Versandkostenfrei</b> bestellen in Deutschland und &Ouml;sterreich<br /><a href="https://www.rheinwerk-verlag.de/hilfe/bestellung_6?GPP=oplup"><img src="common/pfeil_rechts5.gif" border="0" alt="">Info</a><br /><br /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</td>
</tr>
</table>
<br /><br />
<hr width="70%" align="center">
<br />
<div align="center">
    <p class="standard">
        <strong>Copyright © Rheinwerk Verlag GmbH 2006</strong>
        <br />F&uuml;r Ihren privaten Gebrauch d&uuml;rfen Sie die Online-Version nat&uuml;rlich 
        ausdrucken. Ansonsten unterliegt das &lt;openbook&gt; denselben Bestimmungen, 
        wie die gebundene Ausgabe: Das Werk einschlie&szlig;lich aller seiner Teile ist 
        urheberrechtlich gesch&uuml;tzt. Alle Rechte vorbehalten einschlie&szlig;lich der 
        Vervielf&auml;ltigung, &Uuml;bersetzung, Mikroverfilmung sowie Einspeicherung und 
        Verarbeitung in elektronischen Systemen.
    </p>
    <br><a href="https://www.rheinwerk-verlag.de/">[Rheinwerk Computing]</a>
    <br /><br />Rheinwerk Verlag GmbH, Rheinwerkallee 4, 53227 Bonn, 
    Tel.: 0228.42150.0, Fax 0228.42150.77, 
    <a href="mailto:service@rheinwerk-verlag.de">service@rheinwerk-verlag.de</a>
</div>
<br /><br />
</body>

<!-- Mirrored from openbook.rheinwerk-verlag.de/linux_unix_programmierung/Kap14-006.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 19:58:43 GMT -->
</html>
