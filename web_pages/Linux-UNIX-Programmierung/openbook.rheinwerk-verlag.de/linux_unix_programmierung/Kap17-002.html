<html>

<!-- Mirrored from openbook.rheinwerk-verlag.de/linux_unix_programmierung/Kap17-002.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 20:00:01 GMT -->
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Linux-UNIX-Programmierung – 17.3 RPM</title>
<meta name="title" content="Linux-UNIX-Programmierung">
<meta name="author" content="J&uuml;rgen Wolf">
<meta name="publisher" content="Rheinwerk Verlag GmbH 2006">
<meta name="copyright" content="Rheinwerk Verlag GmbH 2006">
<meta name="description" content="Linux-UNIX-Programmierung - Das umfassende Handbuch – 2., aktualisierte und erweiterte Auflage 2006 – ISBN 3-89842-749-8">
<meta name="audience" content="Alle">
<meta name="robots" content="INDEX,FOLLOW">
<meta http-equiv="content-language" content="de">
<link rel="stylesheet" type="text/css" href="common/rw_open.css">
<link rel="prev" href="Kap17-001.html">
<link rel="next" href="Kap17-003.html"><script type="text/javascript" language="JavaScript"><!--
function OpenWin(url,name,height,width)
{
  var InfoWin = window.open(url,name,"directories=0,height="+height+",width=" + width + ",hotkeys=0,location=0,menubar=0,resizable=1,screenX=150,screenY=10,left=150,top=10,scrollbars=1,status=1,titlebar=0,toolbar=0");
  InfoWin.focus();
}
//--></script></head>
<body vlink="#000099" link="#000099" alink="#000099">
<table width="100%" height="74" border="0" cellpadding="0" cellspacing="0" bgcolor="#00549d">
<tr>
<td height="74" valign="bottom" colspan="2"><a href="https://www.rheinwerk-verlag.de/openbook/?GPP=oplup"><img src="common/rw_openbook.gif" width="200" height="56" border="0" alt="Rheinwerk Computing < openbook >"></a></td>
<td width="80" height="74">
<a href="https://www.rheinwerk-verlag.de/?GPP=oplup"><img src="common/rw_computing.gif" border="0" alt="Rheinwerk Computing - Professionelle B&uuml;cher. Auch f&uuml;r Einsteiger."></a>
</td>
</tr>
</table><div align="right"><a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navnav">Professionelle B&uuml;cher. Auch f&uuml;r Einsteiger</a></div><br /><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td width="156" valign="top"><table border="0" cellpadding="0" cellspacing="0" width="100%" align="left">
<tr>
<td colspan="2" class="nav1" align="left" valign="top" height="150">
<table class="tbl1" width="150" border="0" cellpadding="3" cellspacing="0">
<tr>
<td class="tbl2" height="25"><A class="nav" href="index-2.html">Inhaltsverzeichnis</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap00a-000.html#Xxx999195">Vorwort des Autors</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap00b-000.html#Xxx999195">Vorwort der Fachgutachter</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap01-000.html#Xxx999235">1 Einf&uuml;hrung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap02-000.html#Xxx999234">2 E/A-Funktionen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap03-000.html#Xxx999234">3 Attribute von Dateien und Verzeichnissen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap04-000.html#Xxx999234">4 Zugriff auf Systeminformationen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap05-000.html#Xxx999234">5 Devices – eine einfache Verbindung zur Hardware</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap06-000.html#Xxx999234">6 System- und Benutzerdateien</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap07-000.html#Xxx999234">7 D&auml;monen, Zombies und Prozesse</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap08-000.html#Xxx999235">8 Signale</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap09-000.html#Xxx999235">9 IPC – Interprozesskommunikation</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap10-000.html#Xxx999234">10 Threads</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap11-000.html#Xxx999235">11 Netzwerkprogrammierung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap12-000.html#Xxx999236">12 MySQL und PostgreSQL</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap13-000.html#Xxx999235">13 Terminal E/A und Benutzerschnittstellen f&uuml;r die Konsole</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap14-000.html#Xxx999235">14 Xlib – X Window-Programmierung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap15-000.html#Xxx999235">15 GTK+</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap16-000.html#Xxx999235">16 SDL</A></td>
</tr>
<tr>
<td><A class="navnavh" href="Kap17-000.html#Xxx999247">17 Werkzeuge f&uuml;r Programmierer</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18A-000.html#Xxx999248">A Sicherheit unter Linux</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18B-000.html#Xxx999245">B Funktionsreferenz</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18C-000.html#Xxx999245">C Inhalt der Buch-CD</A></td>
</tr>
<tr>
<td><A class="navnav" href="stichwort.html#Xxx537584">Index</A></td>
</tr>
<tr><td><br /><!--<a class="navnav" href="http://download.galileo-press.de/openbook/lup/galileocomputing_linux_unix_programmierung.zip"><strong>Download:</strong><br />- ZIP, ca. 4,3 MB</a></td></tr>
<tr><td><a class="navnav" href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup">Buch bestellen</a></td></tr>
<tr><td>--><a class="navnav" href="https://www.rheinwerk-verlag.de/feedback/">Ihre Meinung?</a><br /><br /></td></tr>
</table></td>
</tr>

</table>
</td>
<td width="10"><img src="common/spacer10.gif" width="10" height="10"></td>
<td width="85%" valign="top" align="center">
<div align="center">
<table width="98%" border="0" cellspacing="0" cellpadding="0" bgcolor="#FFFFFF">
<tr>
<td width="100%" class="start" colspan="1" height="22" align="center">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20%"><a class="navnav" href="Kap17-001.html"> &lt;&lt; zur&uuml;ck</a></td>
<td width="59%">
<div align="center"><a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navnav">Rheinwerk Computing /</a><a class="navnav" href="https://www.rheinwerk-verlag.de/openbook/?GPP=oplup"> &lt;openbook&gt; /</a> <a href="index-2.html" class="navnav"> Linux-UNIX-Programmierung</a></div>
</td>
<td align="right" width="20%">
<div align="right"><a class="navnav" href="Kap17-003.html">vor &gt;&gt; </a></div>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="100%" valign="top">
<table width="100%" border="0" cellpadding="10" cellspacing="0" class="box">
<tr>
<td colspan="2"><a href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup" class="buchtitel">Linux-UNIX-Programmierung</a><span class="autor"> von J&uuml;rgen Wolf</span><br><span class="untertitel">Das umfassende Handbuch – 2., aktualisierte und erweiterte Auflage 2006</span></td>
</tr>
<tr>
<td valign="top" width="90"><a href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup"><img src="common/9783898427494.gif" border="0" alt="Buch: Linux-UNIX-Programmierung" title="Buch: Linux-UNIX-Programmierung" align="left"><br /><br /><span class="autor"><strong>Linux-UNIX-Programmierung</strong><br />1216 S., mit CD, 49,90 Euro<br />Rheinwerk Computing<br />ISBN 3-89842-749-8</span></a></a></td>
<td width="80%">
<table border="0">
<tr>
<td valign="baseline"><img src="common/pfeil_u.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="3" class="kap"><b>Kapitel <a href="Kap17-000.html#RxxKap17000040005FD1F04C100">17 Werkzeuge f&uuml;r Programmierer</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap17-000.html#RxxKap17000040005FD1F04C1D5">17.1 Make</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-000.html#RxxKap17000040005FD1F04C1E8">17.1.1 Erzeugen eines Makefiles</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-000.html#RxxKap17000040005FD1F04C226">17.1.2 Variablen, Makros und Abk&uuml;rzungen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-000.html#RxxKap17000040005FD1F04C253">17.1.3 Implizite Regeln</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-000.html#RxxKap17000040005FD1F04C262">17.1.4 Musterregeln</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-000.html#RxxKap17000040005FD1F04C268">17.1.5 make zur Installation verwenden</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-000.html#RxxKap17000040005FD1F04C26E">17.1.6 make-Optionen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-000.html#RxxKap17000040005FD1F04C270">17.1.7 Ausblick</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap17-001.html#RxxKap170010400061A1F029100">17.2 Bibliotheken erstellen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-001.html#RxxKap170010400061A1F029102">17.2.1 Statische Bibliotheken erstellen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-001.html#RxxKap170010400061A1F02917F">17.2.2 Dynamische Bibliotheken (Shared Libraries) erstellen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-001.html#RxxKap170010400061A1F0291A1">17.2.3 Dynamisches Nachladen von Bibliotheken</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a class="navh2" href="#RxxKap170020400061B1F03E100">17.3 RPM</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap170020400061B1F03E181">17.3.1 Verzeichnisse, die RPM ben&ouml;tigt</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap170020400061B1F03E194">17.3.2 Ein eigenes RPM-Paket erstellen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap170020400061B1F03E196">17.3.3 Sources</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap170020400061B1F03E19D">17.3.4 Die Spec-Datei</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap170020400061B1F03E1E3">17.3.5 Paket erstellen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap170020400061B1F03E1FB">17.3.6 Das Paket installieren</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap17-003.html#RxxKap170030400061C1F047100">17.4 RCS und CVS</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-003.html#RxxKap170030400061C1F047102">17.4.1 Software-Configuration-Management-Systeme (SCM)</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-003.html#RxxKap170030400061C1F047109">17.4.2 RCS</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-003.html#RxxKap170030400061C1F0471C2">17.4.3 CVS</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap17-004.html#RxxKap170040400061D1F040100">17.5 Zeitmessung von Programmen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-004.html#RxxKap170040400061D1F040105">17.5.1 Einfache Zeitmessung mit TIME – Laufzeit von Prozessen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-004.html#RxxKap170040400061D1F04010F">17.5.2 Profiling mit GPROF – Laufzeit von Funktionen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-004.html#RxxKap170040400061D1F040198">17.5.3 Analyse mit GCOV</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap17-005.html#RxxKap170050400061E1F02B100">17.6 Debuggen mit gdb und ddd</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap17-006.html#RxxKap170060400061F1F03C100">17.7 STRACE – Systemaufrufe verfolgen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap17-007.html#RxxKap17007040006201F02E100">17.8 Memory Leaks und unerlaubte Speicherzugriffe</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-007.html#RxxKap17007040006201F02E104">17.8.1 efence</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap17-007.html#RxxKap17007040006201F02E112">17.8.2 valgrind</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap17-008.html#RxxKap17008040006211F036100">17.9 Ausblick</a></b></td>
</tr>
</table><br></td>
</tr>
</table>
<table width="100%" cellpadding="20" cellspacing="0" border="0" bgcolor="#eeeeee">
<tr>
<td>
<a name="t21"></a><a name="t2t31"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div>
<h2 class="t2">17.3 <a id="RxxKap17276RPM" name="RxxKap17276RPM"></a>R<a id="RxxKap170020400061B1F03E100" name="RxxKap170020400061B1F03E100"></a>PM 
      <a href="#t2t32"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><img src="common/15x15leer.gif" width="15" height="15" border="0" alt="top"></h2>
<p><a id="Xxx999248" name="Xxx999248"></a>Um unter Linux auch nicht erfahrenen Anwendern Programme zur Verf&uuml;gung zu stellen, hat Red Hat ein Paketsystem namens RPM (kurz f&uuml;r Red Hat Package Manager) eingef&uuml;hrt. Zuvor (und zum Teil auch immer noch) wurden Programme oder Sources meistens als ein Tar-Ball zur Verf&uuml;gung gestellt. Dabei entstanden u. a. Probleme wie das Entfernen und Aktualisieren von Software oder wenn Anwendungen bestimmte Bibliotheken ben&ouml;tigten.</p>
<p>Mit RPM wurde ein Paketsystem eingef&uuml;hrt, das komfortabel das Installieren, L&ouml;schen und Aktualisieren von Paketen (sowohl von Bin&auml;r- als auch Quellpaketen) erlaubt, ohne dass hierbei Probleme entstehen wie die mit einem anderen bekannten Betriebssystem, das bei der Deinstallation Reste der Software &uuml;brig bleiben. Bei Quellpaketen k&ouml;nnen dabei zur Installation auch eine Neu&uuml;bersetzung und weitere Aktionen ausgef&uuml;hrt werden.</p>
<h4 class="t4">Einf&uuml;hrung in RPM</h4>
<p><a id="Xxx999253" name="Xxx999253"></a>Wer bereits Erfahrung mit RPM hat, kann diesen Abschnitt &uuml;berspringen. Es wird dabei auf das Kommandozeilentool RPM eingegangen und nicht auf eines der vielen grafischen Frontends. F&uuml;r mehr Details, hier speziell f&uuml;r mehr Optionen, sei die Manual Page zu RPM oder die Webseite von Red Hat zu RPM empfohlen. Die Einf&uuml;hrung geht nur kurz auf die Hauptanwendungen von RPM ein.</p>
<h4 class="t4">Installieren – rpm -i</h4>
<p>Um ein Paket zu installieren, das in einer Paketdatei abgelegt ist, m&uuml;ssen Sie in der Kommandozeile die Option <span class="listing">-i</span> und den Paketdateinamen angeben:</p>
<pre>$ rpm -i {optionen} {paketdatei}</pre>
<p>Weitere g&auml;ngige Optionen, die Sie noch zus&auml;tzlich verwenden k&ouml;nnten, w&auml;ren hierbei das Flag <span class="listing">-hv</span>, das einen Fortschrittszustand der Installation anzeigt, und das Flag <span class="listing">--force</span>, das die Installation erzwingt. Es gibt nat&uuml;rlich noch eine Menge Optionen mehr, aber diese stehen hier nicht zur Diskussion. Somit s&auml;he eine Installation eines Paketes namens <span class="listing">mytest-1.0.1.i386.rpm</span> wie folgt aus:</p>
<pre># rpm -i mytest-1.0.1.i386.rpm</pre>
<p>Es spricht &uuml;brigens auch nichts dagegen, sofern eine Verbindung zu einem Netzwerk (z. B. Internet) besteht, die Installation folgenderma&szlig;en auszuf&uuml;hren:</p>
<pre># rpm -i ftp://ftp.pronix.de/mypackages/mytest-1.0.1.i386.rpm</pre>
<p>Dies empfiehlt sich allerdings bei Dialup weniger, sollte n&auml;mlich mytest.rpm noch unerf&uuml;llte Abh&auml;ngigkeiten haben, so wird die Datei nicht lokal gespeichert, was hie&szlig;e, dass noch einmal mytest.rpm heruntergeladen werden m&uuml;sste!</p>
<h4 class="t4">Deinstallieren – rpm -e</h4>
<p>Um ein Paket wieder vom System zu entfernen, wird das Flag <span class="listing">-e</span> (f&uuml;r erase) verwendet:</p>
<pre># rpm -e {option} {paketname}</pre>
<p>Wenn Sie beim L&ouml;schen eines Pakets unsicher sind, k&ouml;nnen Sie auch die Option <span class="listing">--test</span> verwenden, um zu sehen, was <span class="listing">-e</span> als N&auml;chstes tun w&uuml;rde.</p>
<h4 class="t4">Aktualisieren – rpm -U</h4>
<p>Wollen Sie ein Paket erneuern, k&ouml;nnen Sie das Flag <span class="listing">-U</span> (f&uuml;r Upgrade) verwenden. Damit werden eventuell als »alt« markierte Pakete gel&ouml;scht (z. B. bei der Zusammenlegung von zwei Paketen) und neue installiert.</p>
<pre># rpm -U {option} {paketname}</pre>
<p>Auch hierbei werden Sie das eine oder andere Mal nicht um die Option <span class="listing">--force</span> zum Erzwingen des Upgrades herumkommen.</p>
<p>Scherzhafterweise steht im Buch Maximum RPM f&uuml;r »U« die Erkl&auml;rung »Uh, do the right thing« (&Auml;h, mach das Richtige), was man <span class="listing">-U</span> auch wirklich zuschreiben kann, denn sollte ein Paket noch nicht im System existieren, so wird es installiert.</p>
<h4 class="t4">Freshen – rpm -F</h4>
<p>Wer ein ganzes Verzeichnis mit Upgrade-Paketen besitzt, kann <span class="listing">rpm</span> <span class="listing">-F</span> auf diese anwenden, um nur neue Pakete einzuspielen, da <span class="listing">rpm</span> <span class="listing">-U</span> z. B. mit einer Fehlermeldung wie »package aaa_base-9.1–0 is already installed« abbrechen kann.</p>
<h4 class="t4">Weiteres</h4>
<p>Des Weiteren gibt es noch eine Menge Optionen mehr f&uuml;r RPM, etwa zum Ermitteln von Informationen eines Paketes oder zum &Uuml;berpr&uuml;fen bereits installierter oder noch nicht installierter Pakete.</p>
<h4 class="t4">Ben&ouml;tigte Komponenten f&uuml;r ein einfaches RPM</h4>
<p><a id="Xxx999282" name="Xxx999282"></a>Wenn Sie selbst ein eigenes Paket Ihrer Software zur Verf&uuml;gung stellen wollen, ben&ouml;tigen Sie im Grunde drei Komponenten:</p>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Die originalen Quelldateien (Sourcecode) (sog. Pristine Sources) – Diese werden gew&ouml;hnlich als TAR-Archiv zur Verf&uuml;gung gestellt. Wozu die Originalquellen?, werden Sie sich fragen. Wenn Sie wollen, dass die Software auf anderen Systemen wie BSD oder Solaris laufen soll, w&auml;re das z. B. ein Argument. Auch wenn Sie selbst nicht auf einem solchen System arbeiten, findet sich je nach Software nicht selten jemand, der den Quellcode mit ein paar &Auml;nderungen f&uuml;r ein entsprechendes System anpassen kann. Trotzdem sollten die originalen Quellen im TAR-Archiv niemals ver&auml;ndert werden! F&uuml;r Zwecke der Portabilit&auml;t stehen Patches zur Verf&uuml;gung – die n&auml;chste Komponente.</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Patches – Patches werden ben&ouml;tigt, um Fehler zu beheben oder Anpassungen f&uuml;r eine bestimmte Plattform vorzunehmen. Damit bleiben die originalen Quelldateien immer unangetastet. Ein weiterer Vorteil ist, dass Patches meist auf die n&auml;chste Version &uuml;bertragen werden k&ouml;nnen, w&auml;hrend eine &Auml;nderung am Quellbaum immer per Hand in den n&auml;chsten &uuml;bertragen werden m&uuml;sste.</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Eine Informationsdatei, die den kompletten &Uuml;bersetzungs-/Installationsprozess beschreibt (sog. Specfile) – Diese Datei wird ben&ouml;tigt, um RPM mit s&auml;mtlichen Informationen zu versorgen, die n&ouml;tig sind, um daraus ein Paket zu erstellen. Diese Datei wird Spec-Datei genannt und hat eine &auml;hnliche Funktion wie das Makefile.</td>
</tr>
</table>
<a name="t31"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t32"></a><h3 class="t3">17.3.1 Verzeichnisse, die RPM ben&ouml;tig<a id="RxxKap170020400061B1F03E181" name="RxxKap170020400061B1F03E181"></a>t 
      <a href="#t2t33"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t31"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999292" name="Xxx999292"></a>Um die Quellen in ein Verzeichnis zu stellen, verwendet RPM f&uuml;nf Verzeichnisse. Hier ein &Uuml;berblick der Verzeichnisse unter SUSE-Linux, die je nach Distribution auch in einem anderen Ort liegen k&ouml;nnen (bei Red Hat z. B. <span class="listing">/usr/src/redhat</span>):</p>
<pre>$ ls -l /usr/src/packages
insgesamt 0
drwxrwxrwt  2 root     root           48 2003–03–13 23:16 BUILD
drwxrwxrwt  8 root     root          192 2003–06–06 11:03 RPMS
drwxrwxrwt  2 root     root           48 2003–03–13 23:16 SOURCES
drwxrwxrwt  2 root     root           48 2003–03–13 23:16 SPECS
drwxrwxrwt  2 root     root           48 2003–03–13 23:16 SRPMS</pre>
<p>Hier finden Sie im Verzeichnis <span class="listing">/usr/src/packages</span> folgende f&uuml;nf Verzeichnisse und deren Bedeutung:</p>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<caption class="tabunter">
<p><span class="tabunter"><b>Tabelle 17.3   
    </b>Verzeichnisse, die rpm verwendet</span></p>
</caption>
<tr>
<td class="tabellenkopf" bgcolor="#000000"><b>Verzeichnis</b>
</td>
<td class="tabellenkopf" bgcolor="#000000"><b>Bedeutung</b>
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">/usr/src/packages/BUILD
</td>
<td class="tabellentext" bgcolor="#000000">Ein Arbeitsverzeichnis, wo die Quellen ausgepackt und &uuml;bersetzt werden (f&uuml;r das Verzeichnis stellt RPM folgende Shellvariable zur Verf&uuml;gung: RPM_BUILD_DIR).
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">/usr/src/packages/RPMS
</td>
<td class="tabellentext" bgcolor="#000000">Hier befinden sich die fertig gestellten Bin&auml;rpakete.
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">/usr/src/packages/SOURCES
</td>
<td class="tabellentext" bgcolor="#000000">Darin werden alle Quelldateien und Patches abgelegt (f&uuml;r das Verzeichnis stellt RPM folgende Shellvariable zur Verf&uuml;gung: RPM_SOURCE_DIR).
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">/usr/src/packages/SPECS
</td>
<td class="tabellentext" bgcolor="#000000">Verzeichnis f&uuml;r die Spec-Dateien
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">/usr/src/packages/SRPMS
</td>
<td class="tabellentext" bgcolor="#000000">Hier werden die erstellten Source-Pakete abgelegt.
</td>
</tr>
</table><br>
<a name="t32"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t33"></a><h3 class="t3">17.3.2 Ein eigenes RPM-Paket erstelle<a id="RxxKap170020400061B1F03E194" name="RxxKap170020400061B1F03E194"></a>n 
      <a href="#t2t34"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t32"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p>Auf den folgenden Seiten soll jetzt aus einem einfachen Listing ein eigenes Paket erstellt werden. Da Ihr erstes Paket noch keine Patches beinhaltet, soll Ihnen dieser Vorgang anhand der Sources und der Spec-Datei gezeigt werden.</p>
<a name="t33"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t34"></a><h3 class="t3">17.3.3 Source<a id="RxxKap170020400061B1F03E196" name="RxxKap170020400061B1F03E196"></a>s 
      <a href="#t2t35"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t33"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999334" name="Xxx999334"></a>Als Quellcode f&uuml;r das RPM-Paket verwenden Sie am einfachsten die Sources, die Sie schon beim Makefile verwendet haben – also <span class="listing">main.c</span>, <span class="listing">test1.c</span>, <span class="listing">test2.c</span> und das Makefile. Da hier als Projektname <span class="listing">mein_projekt</span> verwendet wurde, m&uuml;ssen Sie das Makefile geringf&uuml;gig ver&auml;ndern. Daher hier nochmals das komplette Makefile:</p>
<pre>CC      = gcc
OBJECTS = main.o test1.o test2.o
LIBS    = -lm
CFLAGS  = -c -O
mein_projekt: $(OBJECTS)
 $(CC) -o $@ $(OBJECTS) $(LIBS)
%.o: %.c
 $(CC) $(CFLAGS) $&lt;
clean:
 rm *.o mein_projekt</pre>
<p>Alle Dateien sollten sich in einem Verzeichnis befinden, woraus Sie jetzt ein komprimiertes TAR-Archiv mit den Quellen f&uuml;r das Projekt <span class="listing">mein_projekt</span> erstellen. Wichtig ist dabei, dass der Name des Verzeichnisses mit den Quellen identisch mit dem Namen des Paketes und der Versionsnummer sein sollte. Im Beispiel sei der Verzeichnisname <span class="listing">mein_projekt-0.1</span>.</p>
<pre>$ ls -l mein_projekt-0.1
insgesamt 16
-rw-r--r--  1 tot      users        307 2004–04–10 12:57 Makefile
-rw-r--r--  1 tot      users        112 2004–04–07 23:36 main.c
-rw-r--r--  1 tot      users         37 2004–04–10 12:57 test1.c
-rw-r--r--  1 tot      users         38 2004–04–10 12:59 test2.c</pre>
<p>Hierzu der Vorgang, wie Sie das Verzeichnis <span class="listing">mein_projekt-0.1</span> zu einem TAR-Ball zusammenpacken und in das Verzeichnis <span class="listing">/usr/src/packages/SOURCES</span> verschieben:</p>
<pre>$ tar -cvjf /usr/src/packages/SOURCES/mein_projekt-0.1.tbz2 \
  mein_projekt-0.1
mein_projekt-0.1/
mein_projekt-0.1/Makefile
mein_projekt-0.1/test1.c
mein_projekt-0.1/test2.c
mein_projekt-0.1/main.c</pre>
<a name="t34"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t35"></a><h3 class="t3">17.3.4 Die Spec-Date<a id="RxxKap170020400061B1F03E19D" name="RxxKap170020400061B1F03E19D"></a>i 
      <a href="#t2t36"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t34"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999343" name="Xxx999343"></a>Etwas umfangreicher gestaltet sich die Erstellung der Spec-Datei. Diesen Vorgang werde ich Ihnen anhand des Projektes <span class="listing">mein_projekt-0.1</span> demonstrieren.</p>
<h4 class="t4">Die Pr&auml;ambel – Informationen zum Paket</h4>
<p><a id="Xxx999346" name="Xxx999346"></a>Zun&auml;chst ben&ouml;tigen Sie die Pr&auml;ambel der Spec-Datei. Dabei handelt es sich um eine Datei mit den verschiedensten Informationen, die Ihnen anschlie&szlig;end in einer Tabelle erl&auml;utert werden. Diese Datei wird in das Verzeichnis SPECS mit der Dateiendung <span class="listing">*.spec</span> abgelegt. In diesem Beispiel sei der Name der Datei <span class="listing">mein_projekt-0.1.spec</span>.</p>
<p>Die Eintragung in dieser Pr&auml;ambel besitzt folgende Syntax:</p>
<pre>[Schl&uuml;sselwort] : [Wert, Beschreibung]</pre>
<p>Einige Schl&uuml;sselw&ouml;rter (die Ihnen in der folgenden Tabelle gezeigt werden) m&uuml;ssen vorhanden sein – wobei die Reihenfolge nicht vorgegeben ist. Die entsprechenden Informationen zum Schl&uuml;sselwort sollten abgesehen von <span class="listing">%description</span> niemals l&auml;nger als eine Zeile sein.</p>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<caption class="tabunter">
<p><span class="tabunter"><b>Tabelle 17.4   
    </b>Schl&uuml;sselw&ouml;rter zur Eintragung in die Pr&auml;ambel</span></p>
</caption>
<tr>
<td class="tabellenkopf" bgcolor="#000000"><b>Schl&uuml;sselwort</b>
</td>
<td class="tabellenkopf" bgcolor="#000000"><b>Muss vorhanden sein</b>
</td>
<td class="tabellenkopf" bgcolor="#000000"><b>Bedeutung</b>
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">Summary
</td>
<td class="tabellentext" bgcolor="#000000">ja
</td>
<td class="tabellentext" bgcolor="#000000">Kurzbeschreibung des Paketes
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">Name
</td>
<td class="tabellentext" bgcolor="#000000">ja
</td>
<td class="tabellentext" bgcolor="#000000">Name des Programms – dieser Eintrag wird beim Label des Pakets und im Paketdateinamen verwendet.
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">Version
</td>
<td class="tabellentext" bgcolor="#000000">ja
</td>
<td class="tabellentext" bgcolor="#000000">Die Versionsnummer des Pakets – dieser Eintrag wird beim Label des Pakets und dem Paketdateinamen verwendet.
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">Release
</td>
<td class="tabellentext" bgcolor="#000000">ja
</td>
<td class="tabellentext" bgcolor="#000000">Damit geben Sie an, wie h&auml;ufig das Programm in der aktuellen Form als RPM-Paket verpackt wurde (oder kurz: die Versionsnummer der Specfile).
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">Copyright
</td>
<td class="tabellentext" bgcolor="#000000">ja
</td>
<td class="tabellentext" bgcolor="#000000">Art der Lizenz, unter der das Paket verbreitet wird/werden darf (z. B. (L)GPL, Artistic, BSD, MIT etc.).
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">Group
</td>
<td class="tabellentext" bgcolor="#000000">ja
</td>
<td class="tabellentext" bgcolor="#000000">Hier l&auml;sst sich die Software in eine bestimmte Kategorie einordnen (Grafik, Editor, Spiel ...). 
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">Source
</td>
<td class="tabellentext" bgcolor="#000000">nein
</td>
<td class="tabellentext" bgcolor="#000000">Der Name (oder auch die URL) der Quelldatei, von wo diese bezogen wurde
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">URL
</td>
<td class="tabellentext" bgcolor="#000000">nein
</td>
<td class="tabellentext" bgcolor="#000000">Wo sind weitere Informationen zu dieser Software zu finden, z. B. Homepage des Projektes?
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">Distribution
</td>
<td class="tabellentext" bgcolor="#000000">nein
</td>
<td class="tabellentext" bgcolor="#000000">F&uuml;r welche Distribution ist das Paket ausgelegt? Geben Sie sie hier an (SUSE x.x, Red Hat x.x ...).
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">Vendor
</td>
<td class="tabellentext" bgcolor="#000000">nein
</td>
<td class="tabellentext" bgcolor="#000000">Name der Firma oder des Urhebers, der dieses Softwarepaket vertreibt
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">Packager
</td>
<td class="tabellentext" bgcolor="#000000">nein
</td>
<td class="tabellentext" bgcolor="#000000">Name/E-Mail-Adresse der Firma oder des Urhebers, der das Paket erstellt hat und das Paket weiterhin unterst&uuml;tzt
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">%description
</td>
<td class="tabellentext" bgcolor="#000000">nein
</td>
<td class="tabellentext" bgcolor="#000000">Diese Zeile kann mehr als eine Zeile Text haben und beschreibt das Paket bzw. die Software. %description ist schon der n&auml;chste Abschnitt und geh&ouml;rt eigentlich nicht mehr zur Pr&auml;ambel. Au&szlig;erdem verwendet es nicht die o. g. Doppelpunkt-Syntax.
</td>
</tr>
</table><br>
<p>F&uuml;r unser Beispiel sieht der Pr&auml;ambel-Abschnitt wie folgt aus:</p>
<pre># Dies ist eine einfache Spec-Datei f&uuml;r ein einfaches Testprojekt
Summary: Ein Testprojekt zum Packen einer eigenen RPM
Name: mein_projekt
Version: 0.1
Release: 1
Copyright: GPL
Group: misc/mein_projekt
Source: ftp://ftp.pronix.de/mein_projekt/mein_projekt-0.1.tbz2
URL: http://pronix.de/mein_projekt/
Distribution: SUSE Linux 9.0
Vendor: Pronix Industries
Packager: J&uuml;rgen Wolf &lt;pronix@pronix.de&gt;
%description
Bei diesem Paket handelt es sich um ein simples Beispiel,
um Ihnen das Erstellen eigener RPM-Pakete naeher zu erlaeutern.</pre>
<h4 class="t4">Der Prep-Abschnitt – Pakete zum Erstellen vorbereiten</h4>
<p><a id="Xxx999443" name="Xxx999443"></a>Mit dem Prep-Abschnitt der Spec-Datei werden die Vorbereitungen getroffen, die n&ouml;tig sind, um ein Paket zu erstellen. Meistens handelt es sich dabei um das Entpacken der Quellen aus den TAR-Archiven und ggf. der Patches. Sie k&ouml;nnen diese Aufgaben entweder von einem Shellskript erledigen lassen oder aber, was meistens der Fall ist, Sie verwenden das Makro <span class="listing">%setup</span>, das s&auml;mtliche Arbeiten vom Auspacken bis zum L&ouml;schen eventuell durchgef&uuml;hrter Builds &uuml;bernimmt. Der Prep-Abschnitt wird immer mit <span class="listing">%prep</span> eingeleitet.</p>
<pre>%prep
%setup</pre>
<p>Dem Makro <span class="listing">%setup</span> k&ouml;nnen au&szlig;erdem auch noch extra einige Parameter &uuml;bergeben werden – was allerdings in unserem Fall nicht n&ouml;tig ist. Das Makro <span class="listing">%setup</span> f&uuml;hrt gew&ouml;hnlich folgende zwei Shellbefehle aus (die Sie alternativ f&uuml;r <span class="listing">%setup</span> verwenden k&ouml;nnten):</p>
<pre>rm -Rf $RPM_BUILD_DIR/mein_projekt-0.1
tar  -xvjf $RPM_SOURCE_DIR/mein_projekt-0.1.tbz2</pre>
<h4 class="t4">Der Build-Abschnitt – Quellen &uuml;bersetzen</h4>
<p><a id="Xxx999449" name="Xxx999449"></a>Nach dem Vorbereiten mit <span class="listing">%prep</span> folgt der Abschnitt zum &Uuml;bersetzen der Quellen. Hierf&uuml;r k&ouml;nnen Sie wiederum Shellskripte verwenden; wobei sich dieser Abschnitt meistens mit einem einfachen Aufruf des Makefiles begn&uuml;gt – sofern Sie nat&uuml;rlich ein entsprechendes Makefile erstellt haben. Der Build-Abschnitt wird mit <span class="listing">%build</span> eingeleitet. In unserem Projekt sieht der Build-Abschnitt wie folgt aus:</p>
<pre>%build
make</pre>
<h4 class="t4">Der Install-Abschnitt</h4>
<p><a id="Xxx999453" name="Xxx999453"></a>In diesem Abschnitt wird, wie man am Namen schon herauslesen kann, festgelegt, was gemacht wird, um die Software systemweit auf dem Rechner zu integrieren. Auch in diesem Fall kann man ein Shellskript verwenden, sofern man nicht auch hier im Makefile ein entsprechendes Ziel angegeben hat. Eingeleitet wird der Install-Abschnitt mit <span class="listing">%install</span>. Im Beispiel wird auch hierf&uuml;r das Makefile mit dem Ziel <span class="listing">install</span> verwendet.</p>
<pre>%install
cp "$RPM_BUILD_DIR"/mein_projekt-0.1/mein_projekt /usr/bin</pre>
<p>Das Ganze m&uuml;sste allerdings in ein Sub-Root (eine Art <span class="listing">chroot()</span>) kopiert werden, denn das Paket kann ja eigentlich nicht live in das System integriert werden. (W&uuml;rde man so z. B. mit der Glibc-Bibliothek vorgehen, w&uuml;rden wir <span class="listing">/lib/libc.so</span> &uuml;berschreiben, w&auml;hrend wir <span class="listing">%install</span> ausf&uuml;hren – bei Glibc ist das fatal.) Daher <span class="listing">RPM_BUILD_ROOT</span>. Nat&uuml;rlich m&uuml;sste das Makefile entsprechend angepasst werden, so dass es <span class="listing">PREFIX</span> unterst&uuml;tzt, z. B.:</p>
<pre>%install
[ "$RPM_BUILD_ROOT" != "/" -a -d "$RPM_BUILD_ROOT" ] &amp;&amp; rm -Rf "$RPM_BUILD_ROOT";
make install PREFIX="$RPM_BUILD_ROOT"</pre>
<h4 class="t4">Die Files-Sektion</h4>
<p><a id="Xxx999459" name="Xxx999459"></a>Hier m&uuml;ssen Sie alle Dateien mit absolutem Pfad angeben, die in das Paket aufgenommen werden. Alles, was Sie nicht in der Files-Sektion angeben, wird nicht in das Paket aufgenommen und auch bei der Deinstallation nicht wieder entfernt. Allerdings mit RPM ab der Version 4 bricht <span class="listing">rpm</span> ab, wenn es nicht –in <span class="listing">%files</span> aufgelistete Dateien findet. Einige m&ouml;gen das Verhalten st&ouml;rend finden, es dient jedoch zur Suche nach Fehlern. Schreiben Sie vor den Dateinamen ein <span class="listing">%doc</span>, wird die entsprechende Datei in einem Verzeichnis wie <span class="listing">/usr/share/doc/[paketname]</span> (Red Hat: <span class="listing">/usr/doc/paketname</span>) abgelegt. Wenn Sie in Ihrem Paket eine Manual Page eingerichtet haben, m&uuml;ssen Sie auch hierf&uuml;r einen entsprechenden Pfad angeben. Eingeleitet wird die Files-Sektion mit <span class="listing">%files</span>. So k&ouml;nnte eine Files-Sektion wie folgt aussehen:</p>
<pre>%files
%doc README
/usr/bin/mein_projekt
/usr/share/man/man1/mein_projekt.1</pre>
<p>Hiermit h&auml;tten Sie im Verzeichnis <span class="listing">/usr/share/doc/mein_projekt-0.1</span> bzw. <span class="listing">/usr/doc/...</span> eine Datei namens <span class="listing">README</span>, die Software selbst (in <span class="listing">/usr/bin</span> besser <span class="listing">/usr/local/bin</span>) und die Manual Page (in <span class="listing">usr/share/man/man1/</span>) in das Paket aufgenommen (immer vorausgesetzt, die Pfadangabe stimmt und Sie haben entsprechende Rechte). In unserem Beispiel reicht folgende Files-Sektion aus:</p>
<pre>%files
/usr/bin/mein_projekt</pre>
<a name="t35"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t36"></a><h3 class="t3">17.3.5 Paket erstelle<a id="RxxKap170020400061B1F03E1E3" name="RxxKap170020400061B1F03E1E3"></a>n 
      <a href="#t2t37"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t35"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999466" name="Xxx999466"></a>Nachdem Sie f&uuml;r das Projekt die Spec-Datei fertig gestellt haben, k&ouml;nnen Sie diese in das SPECS-Verzeichnis verschieben.</p>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td class="tabellentext" bgcolor="#000000">
<p class="BStandard"><b>Hinweis   </b>Damit auch alles so funktioniert, wie Sie es wollen und der Autor es beabsichtigt hatte, m&uuml;ssen (sofern n&ouml;tig) nat&uuml;rlich die entsprechenden Pfadangaben an das eigene System angepasst werden. Kurz: Nicht immer bringt ein stures Copy &amp; Paste (oder hier Read &amp; Type) den gew&uuml;nschten Erfolg.</p>
</td>
</tr>
</table><br>
<p>Hier nochmals die komplette Spec-Datei namens <span class="listing">mein_projekt.spec:</span></p>
<pre># Dies ist eine einfache Spec-Datei f&uuml;r ein einfaches Testprojekt
Summary: Ein Testprojekt zum Packen einer eigenen RPM
Name: mein_projekt
Version: 0.1
Release: 1
Copyright: GPL
Group: misc/mein_projekt
Source: ftp://ftp.pronix.de/mein_projekt/mein_projekt-0.1.tbz2
URL: http://pronix.de/mein_projekt/
Distribution: SUSE Linux 9.0
Vendor: Pronix Industries
Packager: Juergen Wolf &lt;pronix@pronix.de&gt;
%description
Bei diesem Paket handelt es sich um ein simples Beispiel,
um Ihnen das Erstellen eigener RPM-Pakete naeher zu erlaeutern.
%prep
%setup
%build
make
%install
cp "$RPM_BUILD_DIR"/mein_projekt-0.1/mein_projekt /usr/bin
%files
/usr/bin/mein_projekt</pre>
<p>Diese Datei verschieben Sie jetzt wie folgt ins SPECS-Verzeichnis:</p>
<pre>$ mv mein_projekt.spec /usr/src/packages/SPECS/</pre>
<p>Jetzt k&ouml;nnen Sie in das SPECS-Verzeichnis wechseln und das Paket erstellen. Hierzu werden root-Rechte ben&ouml;tigt. Anschlie&szlig;end f&uuml;hren Sie mit RPMbuild die <span class="listing">mein_projekt.spec</span>-Datei mit dem Flag <span class="listing">-ba</span> (<span class="listing">b</span> f&uuml;r build) aus, womit ein Paket erstellt werden soll – <span class="listing">a</span> steht f&uuml;r all – was daf&uuml;r sorgt, dass der komplette Vorgang auf einmal durchgef&uuml;hrt werden soll.</p>
<pre># cd /usr/src/packages/SPECS/
# rpm -ba mein_projekt.spec</pre>
<p>Jetzt bekommen Sie eine Menge an Informationen um die Ohren gehauen, die sich in f&uuml;nf Abschnitte aufteilen lassen:</p>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> die Ausgabe des <span class="listing">%prep</span>-Abschnitts</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> die Ausgabe des <span class="listing">%build</span>-Abschnitts</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> die Ausgabe des <span class="listing">%install</span>-Abschnitts</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> die Ausgabe des <span class="listing">%files</span>-Abschnitts</td>
</tr>
</table>
<p>Mit der letzten und f&uuml;nften Ausgabe wird praktisch das Paket erstellt:</p>
<pre>Suche  Provides: (benutze /usr/lib/rpm/find-provides)...
Suche  Requires: (benutze /usr/lib/rpm/find-requires)...
Requires: ld-linux.so.2 libc.so.6 libc.so.6(GLIBC_2.0) libm.so.6
Geschrieben: /usr/src/packages/SRPMS/mein_projekt-0.1–1.src.rpm
Geschrieben: /usr/src/packages/RPMS/i386/mein_projekt-0.1–1.i386.rpm</pre>
<p>Hierbei wird noch ausgegeben, welche Bibliotheken die Anwendung zum &Uuml;bersetzen ben&ouml;tigt. In diesem Fall sollten mit den Bibliotheken</p>
<pre>Requires: ld-linux.so.2 libc.so.6 libc.so.6(GLIBC_2.0) libm.so.6</pre>
<p>auf keinem System irgendwelche Probleme auftreten. Jetzt haben Sie zwar ein fertiges Paket im Verzeichnis</p>
<pre>Geschrieben: /usr/src/packages/SRPMS/mein_projekt-0.1–1.src.rpm
        /usr/src/packages/RPMS/i386/mein_projekt-0.1–1.i386.rpm</pre>
<p>aber dies ist erst die halbe Miete. Jetzt sollten Sie dieses Paket erst auf einem fremden Rechner testen, auf dem dieses Paket noch nicht installiert ist.</p>
<p>Einen &Uuml;berblick &uuml;ber ein noch nicht installiertes RPM-Paket (-p) k&ouml;nnen Sie sich mit folgender Abfrage verschaffen:</p>
<pre>$ rpm –iqp \
  /usr/src/packages/RPMS/i386/mein_projekt-0.1–1.i386.rpm -i
Name        : mein_projekt        Relocations: (not relocateable)
Version     : 0.1                 Vendor: Pronix Industries
Release     : 1                   
Build Date: Sam 10 Apr 2004 14:41:35 CEST
Install date: (not installed)     Build Host: linux.local
Group       : misc/mein_projekt
Source RPM: mein_projekt-0.1–1.src.rpm
Size        : 11461                            License: GPL
Packager    : J&uuml;rgen Wolf &lt;pronix@pronix.de&gt;
URL         : http://pronix.de/mein_projekt/
Summary     : Ein Testprojekt zum Packen einer eigenen RPM
Description :
Bei diesem Paket handelt es sich um ein simples Beispiel,
um Ihnen das Erstellen eigener RPM-Pakete naeher zu erlaeutern.
Distribution: SUSE Linux 9.1</pre>
<a name="t36"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t37"></a><h3 class="t3">17.3.6 Das Paket installiere<a id="RxxKap170020400061B1F03E1FB" name="RxxKap170020400061B1F03E1FB"></a>n 
      <img src="common/15x15leer.gif" width="15" height="15" border="0" alt="top"><a href="#t2t36"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<h4 class="t4">Kommandozeile</h4>
<p><a id="Xxx999495" name="Xxx999495"></a>Das Installieren von der Kommandozeile aus ist recht einfach zu realisieren (root):</p>
<pre># rpm -Uhv \
  /usr/src/packages/RPMS/i386/mein_projekt-0.1–1.i386.rpm</pre>
<h4 class="t4">KRPMView und Yast2</h4>
<p>Mittlerweile l&auml;sst sich unter SUSE auch ein eigenes Paket mit Yast integrieren. Hierzu gen&uuml;gen ein einfacher Rechtsklick &uuml;ber dem Paket und das anschlie&szlig;ende Anklicken von <span class="listing">Vorschau</span> <span class="listing">in</span> <span class="listing">KRPMView</span>. Jetzt nur noch auf den Button <span class="listing">Installieren</span> <span class="listing">mit</span> <span class="listing">Yast</span> dr&uuml;cken. Jetzt sollten Sie nach dem <span class="listing">root</span>-Passwort gefragt werden, und danach wird das Paket installiert.</p>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td class="tabellentext">
<p><a name="bild"></a><a href="#bild" onClick="OpenWin('bilder/17_2.gif','Abbildung',600,600)"><img border="0" src="bilderklein/klein17_2.gif" alt="Abbildung"><br><span class="tabunter">Hier klicken, um das Bild zu vergr&ouml;&szlig;ern</span></a></p>
<p class="tabunter"><b>Abbildung 17.2   
    </b>Installieren eines RPM-Pakets mit KRPMView</p>
</td>
</tr>
</table><br>
<p>Nun k&ouml;nnen Sie bei Yast die <span class="listing">Paketgruppen</span> ausw&auml;hlen und sollten dort einen neuen Reiter namens <span class="listing">misc</span> mit dem Paket <span class="listing">mein_projekt</span> vorfinden.</p>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td class="tabellentext">
<p><a name="bild"></a><a href="#bild" onClick="OpenWin('bilder/17_3.gif','Abbildung',600,600)"><img border="0" src="bilderklein/klein17_3.gif" alt="Abbildung"><br><span class="tabunter">Hier klicken, um das Bild zu vergr&ouml;&szlig;ern</span></a></p>
<p class="tabunter"><b>Abbildung 17.3   
    </b>Das eigene RPM-Paket unter der Kontrolle von Yast2</p>
</td>
</tr>
</table><br>
<p>Hier finden Sie jetzt auch recht komfortabel die technischen Informationen, technischen Daten, Abh&auml;ngigkeiten und Versionen des Pakets wieder.</p>
<h4 class="t4">KPackage</h4>
<p>Nat&uuml;rlich muss es nicht immer SUSE mit Yast sein. Schlie&szlig;lich gibt es auch noch KPackage, womit Sie Ihre Pakete bequem installieren, l&ouml;schen und erneuern k&ouml;nnen.</p>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="100%" class="start" colspan="1" height="22" align="center">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20%"><a class="navnav" href="Kap17-001.html"> &lt;&lt; zur&uuml;ck</a></td>
<td width="59%">
<div align="center"><a class="navnav" href="#">&lt;top&gt;</a></div>
</td>
<td align="right" width="20%">
<div align="right"><a class="navnav" href="Kap17-003.html">vor &gt;&gt; </a></div>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</td>
<td width="10" valign="top">&nbsp;&nbsp;</td>
<td width="160" valign="top">
    <table border="0" cellpadding="0" cellspacing="0" width="160">
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2">
                            &nbsp;<a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navs">
                            <strong>Zum Katalog</strong></a>
                        </td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2">
                            <img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td><a href="https://www.rheinwerk-verlag.de/linux-unix-programmierung_1137/?GPP=oplup">
                                        <img src="common/749.gif"  border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-UNIX-Programmierung" title="Zum Katalog: Linux-UNIX-Programmierung">
                                        <br /><strong>Linux-UNIX-<br />Programmierung</strong><br /><img src="common/pfeil_rechts5.gif" border="0" alt="">bestellen</a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2"><strong>&nbsp;Ihre Meinung?</strong></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td>Wie hat Ihnen das &lt;openbook&gt; gefallen?<br /><a href="https://www.rheinwerk-verlag.de/feedback/"><img src="common/pfeil_rechts5.gif" border="0" alt="">Ihre Meinung</a>
                                    <br /><br /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2">&nbsp;<a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navs"><strong>Buchtipps</strong></a></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux-server_3685/?GPP=oplup">
                        <img src="common/3020.gif" width="78" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-Server" title="Zum Katalog: Linux-Server"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux-Server</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/das-komplettpaket-lpic-1-lpic-2_3782/?GPP=oplup">
                        <img src="common/3529.gif" width="70" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Das Komplettpaket LPIC-1 &amp; LPIC-2" title="Zum Katalog: Das Komplettpaket LPIC-1 &amp; LPIC-2"><br /><br /><br /><br /><br /><br /><br />&nbsp;Das Komplettpaket<br />&nbsp;LPIC-1 &amp; LPIC-2</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux-hochverfugbarkeit_3420/?GPP=oplup">
                        <img src="common/2542.gif" width="70" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-Hochverfügbarkeit" title="Zum Katalog: Linux-Hochverfügbarkeit"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux-<br />&nbsp;Hochverfügbarkeit</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/shell-programmierung_3345/?GPP=oplup">
                        <img src="common/2310.gif" width="69" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Shell-Programmierung" title="Zum Katalog: Shell-Programmierung"><br /><br /><br /><br /><br /><br /><br />&nbsp;Shell-<br />&nbsp;Programmierung</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux_3436/?GPP=oplup">
                        <img src="common/2591.gif" width="79" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux Handbuch" title="Zum Katalog: Linux Handbuch"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux Handbuch</a><br /><br /></td>
                    </tr>
                </table></td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2"><strong>&nbsp;Shopping</strong></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td><b>Versandkostenfrei</b> bestellen in Deutschland und &Ouml;sterreich<br /><a href="https://www.rheinwerk-verlag.de/hilfe/bestellung_6?GPP=oplup"><img src="common/pfeil_rechts5.gif" border="0" alt="">Info</a><br /><br /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</td>
</tr>
</table>
<br /><br />
<hr width="70%" align="center">
<br />
<div align="center">
    <p class="standard">
        <strong>Copyright © Rheinwerk Verlag GmbH 2006</strong>
        <br />F&uuml;r Ihren privaten Gebrauch d&uuml;rfen Sie die Online-Version nat&uuml;rlich 
        ausdrucken. Ansonsten unterliegt das &lt;openbook&gt; denselben Bestimmungen, 
        wie die gebundene Ausgabe: Das Werk einschlie&szlig;lich aller seiner Teile ist 
        urheberrechtlich gesch&uuml;tzt. Alle Rechte vorbehalten einschlie&szlig;lich der 
        Vervielf&auml;ltigung, &Uuml;bersetzung, Mikroverfilmung sowie Einspeicherung und 
        Verarbeitung in elektronischen Systemen.
    </p>
    <br><a href="https://www.rheinwerk-verlag.de/">[Rheinwerk Computing]</a>
    <br /><br />Rheinwerk Verlag GmbH, Rheinwerkallee 4, 53227 Bonn, 
    Tel.: 0228.42150.0, Fax 0228.42150.77, 
    <a href="mailto:service@rheinwerk-verlag.de">service@rheinwerk-verlag.de</a>
</div>
<br /><br />
</body>

<!-- Mirrored from openbook.rheinwerk-verlag.de/linux_unix_programmierung/Kap17-002.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 20:00:09 GMT -->
</html>
