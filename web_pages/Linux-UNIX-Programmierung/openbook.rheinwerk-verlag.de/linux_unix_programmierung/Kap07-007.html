<html>

<!-- Mirrored from openbook.rheinwerk-verlag.de/linux_unix_programmierung/Kap07-007.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 19:57:10 GMT -->
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Linux-UNIX-Programmierung – 7.8 Erzeugung von Prozessen – fork()</title>
<meta name="title" content="Linux-UNIX-Programmierung">
<meta name="author" content="J&uuml;rgen Wolf">
<meta name="publisher" content="Rheinwerk Verlag GmbH 2006">
<meta name="copyright" content="Rheinwerk Verlag GmbH 2006">
<meta name="description" content="Linux-UNIX-Programmierung - Das umfassende Handbuch – 2., aktualisierte und erweiterte Auflage 2006 – ISBN 3-89842-749-8">
<meta name="audience" content="Alle">
<meta name="robots" content="INDEX,FOLLOW">
<meta http-equiv="content-language" content="de">
<link rel="stylesheet" type="text/css" href="common/rw_open.css">
<link rel="prev" href="Kap07-006.html">
<link rel="next" href="Kap07-008.html"><script type="text/javascript" language="JavaScript"><!--
function OpenWin(url,name,height,width)
{
  var InfoWin = window.open(url,name,"directories=0,height="+height+",width=" + width + ",hotkeys=0,location=0,menubar=0,resizable=1,screenX=150,screenY=10,left=150,top=10,scrollbars=1,status=1,titlebar=0,toolbar=0");
  InfoWin.focus();
}
//--></script></head>
<body vlink="#000099" link="#000099" alink="#000099">
<table width="100%" height="74" border="0" cellpadding="0" cellspacing="0" bgcolor="#00549d">
<tr>
<td height="74" valign="bottom" colspan="2"><a href="https://www.rheinwerk-verlag.de/openbook/?GPP=oplup"><img src="common/rw_openbook.gif" width="200" height="56" border="0" alt="Rheinwerk Computing < openbook >"></a></td>
<td width="80" height="74">
<a href="https://www.rheinwerk-verlag.de/?GPP=oplup"><img src="common/rw_computing.gif" border="0" alt="Rheinwerk Computing - Professionelle B&uuml;cher. Auch f&uuml;r Einsteiger."></a>
</td>
</tr>
</table><div align="right"><a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navnav">Professionelle B&uuml;cher. Auch f&uuml;r Einsteiger</a></div><br /><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td width="156" valign="top"><table border="0" cellpadding="0" cellspacing="0" width="100%" align="left">
<tr>
<td colspan="2" class="nav1" align="left" valign="top" height="150">
<table class="tbl1" width="150" border="0" cellpadding="3" cellspacing="0">
<tr>
<td class="tbl2" height="25"><A class="nav" href="index-2.html">Inhaltsverzeichnis</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap00a-000.html#Xxx999195">Vorwort des Autors</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap00b-000.html#Xxx999195">Vorwort der Fachgutachter</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap01-000.html#Xxx999235">1 Einf&uuml;hrung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap02-000.html#Xxx999234">2 E/A-Funktionen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap03-000.html#Xxx999234">3 Attribute von Dateien und Verzeichnissen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap04-000.html#Xxx999234">4 Zugriff auf Systeminformationen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap05-000.html#Xxx999234">5 Devices – eine einfache Verbindung zur Hardware</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap06-000.html#Xxx999234">6 System- und Benutzerdateien</A></td>
</tr>
<tr>
<td><A class="navnavh" href="Kap07-000.html#Xxx999234">7 D&auml;monen, Zombies und Prozesse</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap08-000.html#Xxx999235">8 Signale</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap09-000.html#Xxx999235">9 IPC – Interprozesskommunikation</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap10-000.html#Xxx999234">10 Threads</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap11-000.html#Xxx999235">11 Netzwerkprogrammierung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap12-000.html#Xxx999236">12 MySQL und PostgreSQL</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap13-000.html#Xxx999235">13 Terminal E/A und Benutzerschnittstellen f&uuml;r die Konsole</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap14-000.html#Xxx999235">14 Xlib – X Window-Programmierung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap15-000.html#Xxx999235">15 GTK+</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap16-000.html#Xxx999235">16 SDL</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap17-000.html#Xxx999247">17 Werkzeuge f&uuml;r Programmierer</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18A-000.html#Xxx999248">A Sicherheit unter Linux</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18B-000.html#Xxx999245">B Funktionsreferenz</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18C-000.html#Xxx999245">C Inhalt der Buch-CD</A></td>
</tr>
<tr>
<td><A class="navnav" href="stichwort.html#Xxx537584">Index</A></td>
</tr>
<tr><td><br /><!--<a class="navnav" href="http://download.galileo-press.de/openbook/lup/galileocomputing_linux_unix_programmierung.zip"><strong>Download:</strong><br />- ZIP, ca. 4,3 MB</a></td></tr>
<tr><td><a class="navnav" href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup">Buch bestellen</a></td></tr>
<tr><td>--><a class="navnav" href="https://www.rheinwerk-verlag.de/feedback/">Ihre Meinung?</a><br /><br /></td></tr>
</table></td>
</tr>

</table>
</td>
<td width="10"><img src="common/spacer10.gif" width="10" height="10"></td>
<td width="85%" valign="top" align="center">
<div align="center">
<table width="98%" border="0" cellspacing="0" cellpadding="0" bgcolor="#FFFFFF">
<tr>
<td width="100%" class="start" colspan="1" height="22" align="center">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20%"><a class="navnav" href="Kap07-006.html"> &lt;&lt; zur&uuml;ck</a></td>
<td width="59%">
<div align="center"><a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navnav">Rheinwerk Computing /</a><a class="navnav" href="https://www.rheinwerk-verlag.de/openbook/?GPP=oplup"> &lt;openbook&gt; /</a> <a href="index-2.html" class="navnav"> Linux-UNIX-Programmierung</a></div>
</td>
<td align="right" width="20%">
<div align="right"><a class="navnav" href="Kap07-008.html">vor &gt;&gt; </a></div>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="100%" valign="top">
<table width="100%" border="0" cellpadding="10" cellspacing="0" class="box">
<tr>
<td colspan="2"><a href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup" class="buchtitel">Linux-UNIX-Programmierung</a><span class="autor"> von J&uuml;rgen Wolf</span><br><span class="untertitel">Das umfassende Handbuch – 2., aktualisierte und erweiterte Auflage 2006</span></td>
</tr>
<tr>
<td valign="top" width="90"><a href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup"><img src="common/9783898427494.gif" border="0" alt="Buch: Linux-UNIX-Programmierung" title="Buch: Linux-UNIX-Programmierung" align="left"><br /><br /><span class="autor"><strong>Linux-UNIX-Programmierung</strong><br />1216 S., mit CD, 49,90 Euro<br />Rheinwerk Computing<br />ISBN 3-89842-749-8</span></a></a></td>
<td width="80%">
<table border="0">
<tr>
<td valign="baseline"><img src="common/pfeil_u.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="3" class="kap"><b>Kapitel <a href="Kap07-000.html#RxxKap07000040001DB1F02D100">7 D&auml;monen, Zombies und Prozesse</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-000.html#RxxKap07000040001DB1F02D103">7.1 Was ist ein Prozess?</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-001.html#RxxKap07001040001F81F033100">7.2 Prozesskomponente</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-001.html#RxxKap07001040001F81F033114">7.2.1 Prozessnummer (PID)</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-001.html#RxxKap07001040001F81F033175">7.2.2 Prozessnummer des Vaterprozesses (PPID)</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-001.html#RxxKap07001040001F81F033177">7.2.3 Benutzer- und Gruppennummer eines Prozesses (UID, EUID, GID, EGID)</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-001.html#RxxKap07001040001F81F03317F">7.2.4 Prozessstatus</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-001.html#RxxKap07001040001F81F033194">7.2.5 Prozesspriorit&auml;t</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-001.html#RxxKap07001040001F81F033197">7.2.6 Timesharing-Prozesse</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-001.html#RxxKap07001040001F81F0331B4">7.2.7 Prozessauslagerung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-001.html#RxxKap07001040001F81F0331B8">7.2.8 Steuerterminal</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-002.html#RxxKap07002040001F91F041100">7.3 Prozesse &uuml;berwachen – ps, top, kpm</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-003.html#RxxKap07003040001FA1F021100">7.4 Lebenszyklus eines Prozesses</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-004.html#RxxKap07004040001FB1F030100">7.5 Umgebungsvariablen eines Prozesses</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-004.html#RxxKap07004040001FB1F030108">7.5.1 Einzelne Umgebungsvariablen abfragen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-004.html#RxxKap07004040001FB1F03010F">7.5.2 Umgebungsvariable ver&auml;ndern oder hinzuf&uuml;gen – putenv() und setenv()</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-004.html#RxxKap07004040001FB1F030197">7.5.3 L&ouml;schen von Umgebungsvariablen – unsetenv() und clearenv()</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-005.html#RxxKap07005040001FC1F039100">7.6 Ressourcenlimits eines Prozesses</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-005.html#RxxKap07005040001FC1F039192">7.6.1 Mehr Sicherheit mit Ressourcenlimits</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-006.html#RxxKap07006040001FD1F02A100">7.7 Prozesserkennung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a class="navh2" href="#RxxKap07007040001FE1F021100">7.8 Erzeugung von Prozessen – fork()</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap07007040001FE1F021111">7.8.1 Pufferung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap07007040001FE1F02117D">7.8.2 Was wird vererbt und was nicht?</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap07007040001FE1F02118F">7.8.3 Einen Prozess mit ver&auml;nderter Priorit&auml;t erzeugen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-008.html#RxxKap07008040001FF1F022100">7.9 Warten auf einen Prozess</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-009.html#RxxKap07009040002001F028100">7.10 Die exec-Familie</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-009.html#RxxKap07009040002001F028112">7.10.1 execl()</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-009.html#RxxKap07009040002001F028118">7.10.2 execve()</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-009.html#RxxKap07009040002001F028177">7.10.3 execv()</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-009.html#RxxKap07009040002001F02817A">7.10.4 execle()</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-009.html#RxxKap07009040002001F02817D">7.10.5 execlp()</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-009.html#RxxKap07009040002001F028180">7.10.6 execvp()</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-009.html#RxxKap07009040002001F028183">7.10.7 Kindprozesse mit exec-Aufruf &uuml;berlagern</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-010.html#RxxKap07010040002011F016100">7.11 Kommandoaufrufe aus dem Programm – system()</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-011.html#RxxKap07011040002021F048100">7.12 D&auml;monprozesse</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-011.html#RxxKap07011040002021F04810A">7.12.1 Wie ein Prozess zum D&auml;mon wird ...</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-011.html#RxxKap07011040002021F048110">7.12.2 D&auml;mon, sprich mit uns ...</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-011.html#RxxKap07011040002021F048112">7.12.3 Protokollieren von D&auml;monen – syslog()</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-011.html#RxxKap07011040002021F0481CA">7.12.4 syslog() in der Praxis</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-011.html#RxxKap07011040002021F0481E1">7.12.5 Den D&auml;mon, den ich rief ...</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-012.html#RxxKap07012040002031F04A100">7.13 Rund um die Ausf&uuml;hrung von Prozessen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-012.html#RxxKap07012040002031F04A102">7.13.1 Einen D&auml;mon beim Booten mit einem init-Skript starten</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-012.html#RxxKap07012040002031F04A19D">7.13.2 Hintergrundprozesse und Jobkontrolle</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap07-012.html#RxxKap07012040002031F04A1CD">7.13.3 Prozesse zeitgesteuert ausf&uuml;hren (cron-Jobs)</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap07-013.html#RxxKap07013040002041F025100">7.14 Zusammenfassung und Ausblick</a></b></td>
</tr>
</table><br></td>
</tr>
</table>
<table width="100%" cellpadding="20" cellspacing="0" border="0" bgcolor="#eeeeee">
<tr>
<td>
<a name="t21"></a><a name="t2t31"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div>
<h2 class="t2">7.8 <a id="RxxKap07189ErzeugungvonProzessenfork" name="RxxKap07189ErzeugungvonProzessenfork"></a>Erzeugung von Prozessen – fork<a id="RxxKap07007040001FE1F021100" name="RxxKap07007040001FE1F021100"></a>() 
      <a href="#t2t32"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><img src="common/15x15leer.gif" width="15" height="15" border="0" alt="top"></h2>
<p><a id="Xxx999236" name="Xxx999236"></a><a id="Xxx999237" name="Xxx999237"></a>Meistens wird zum Erzeugen eines neuen Prozesses der Systemaufruf <span class="listing">fork()</span> verwendet:</p>
<pre>#include &lt;unistd. h.&gt;
#include  &lt;sys/types.h&gt;
pid_t fork(void);</pre>
<p><span class="listing">fork()</span> liefert bei Erfolg dem Elternprozess die Prozess-ID (<span class="listing">PID</span>) des Kindprozesses zur&uuml;ck. Dieser hingegen bekommt die Nummer 0 zur&uuml;ckgeliefert. Um seine eigene PID zu finden, ist dann <span class="listing">getpid()</span> n&ouml;tig. Ein typischer Codeausschnitt der Prozessgenerierung sieht h&auml;ufig so aus:</p>
<pre>switch( pid=fork() ) {
  case -1:   /* Fehler bei fork() */ 
     break;
  case  0:   /* Hier befinden Sie sich im Kindprozess   */
     break;
  default:   /* Hier befinden Sie sich im Elternprozess */ 
     break;
}</pre>
<p>Oder so:</p>
<pre>if((pid = fork()) &lt; 0) {
    fprintf(stderr, "Fehler... %s\n", strerror(errno));
} 
else if(pid == 0) {
    /* Kindprozess */
} 
else {
    /* Elternprozess */
}</pre>
<p><a id="Xxx999244" name="Xxx999244"></a><a id="Xxx999245" name="Xxx999245"></a>Daraus l&auml;sst sich auch herauslesen, dass ein Kindprozess nur einen Elternprozess, aber der Elternprozess mehrere Kindprozesse haben kann. Der neue Kindprozess ist nun eine identische Kopie des Elternprozesses. Beide besitzen u. a. dieselben Daten, denselben Befehlsz&auml;hler, die offenen Dateien, dieselbe User-ID und dasselbe Arbeitsverzeichnis.</p>
<p>Der Unterprozess (Kindprozess) sollte an seinem logischen Ende im Code m&ouml;glichst irgendwo ein <span class="listing">exit()</span> haben, sonst macht er unterhalb des <span class="listing">switch</span>/<span class="listing">if</span> weiter wie der Elternprozess!</p>
<p>Gew&ouml;hnlich werden aber nicht gleich das Daten-, das Stacksegment und der Heap kopiert. Denn nicht selten wird ein Kindprozess erzeugt und mit einer &Uuml;berlagerung eines <span class="listing">exec</span>-Funktionsaufrufes mit anderweitigen Daten und Code versorgt. Daher wird h&auml;ufig im Kernel das Copy on write-Verfahren<a id="Xxx999249" name="Xxx999249"></a> angewandt. Das bedeutet, dass erst dann wirklich eine Kopie einer Page der Datensegmente erfolgt, wenn in diese geschrieben wird. Dadurch erspart man sich h&auml;ufig zeitaufw&auml;ndiges Kopieren, was bei knappem RAM zum Swapping f&uuml;hren kann.</p>
<p>Nicht kopiert wird hingegen das Textsegment, das von beiden Prozessen gleicherma&szlig;en benutzt wird. Beide Prozesse arbeiten mit unterschiedlichen Befehlszeigern.</p>
<p>Dazu am besten ein Beispiel, das Sie zum einen verwirren sollte, aber zum anderen die Prozesse, wenn verstanden, in einem ganz anderen Licht erscheinen lassen. Hierzu das Listing:</p>
<pre><a id="Xxx999252" name="Xxx999252"></a>/* child.c */
#include &lt;unistd. h.&gt;
#include &lt;sys/types.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
static int global_var = 1;
int main (void) {
   pid_t pid;
   int lokal_var = 1;
   switch (pid = fork ()) {
   case -1:
      printf ("Fehler bei fork()\n");
      break;
   case 0:
      sleep (1);   /* Kurze Pause */
      printf ("--- Im Kindprozess ---\n");
      printf ("global_var = %d Speicheradresse : %p\n",
                global_var, &amp;global_var);
      printf ("lokal_var  = %d Speicheradresse : %p\n",
                lokal_var, &amp;lokal_var);
      ++global_var;
      ++lokal_var;
      printf ("--- Im Kindprozess ---\n");
      printf ("global_var = %d Speicheradresse : %p\n",
                global_var, &amp;global_var);
      printf ("lokal_var  = %d Speicheradresse : %p\n",
                lokal_var, &amp;lokal_var);
      break;
   default:
      printf ("--- Im Elternprozess ---\n");
      printf ("global_var = %d Speicheradresse : %p\n",
                global_var, &amp;global_var);
      printf ("lokal_var  = %d Speicheradresse : %p\n",
                lokal_var, &amp;lokal_var);
      sleep (2);
      printf ("--- Im Elternprozess ---\n");
      printf ("global_var = %d Speicheradresse : %p\n",
                global_var, &amp;global_var);
      printf ("lokal_var  = %d Speicheradresse : %p\n",
                lokal_var, &amp;lokal_var);
      break;
   }
   return EXIT_SUCCESS;
}</pre>
<p>Das Programm bei der Ausf&uuml;hrung:</p>
<pre>$ gcc -o child child.c
$ ./child
--- Im Elternprozess (2152) ---
global_var = 1 Speicheradresse : 0x804976c
lokal_var  = 1 Speicheradresse : 0xbffff380
--- Im Kindprozess (2153) ---
global_var = 1 Speicheradresse : 0x804976c
lokal_var  = 1 Speicheradresse : 0xbffff380
--- Im Kindprozess (2153) ---
global_var = 2 Speicheradresse : 0x804976c
lokal_var  = 2 Speicheradresse : 0xbffff380
--- Im Elternprozess (2152) ---
global_var = 1 Speicheradresse : 0x804976c
lokal_var  = 1 Speicheradresse : 0xbffff380</pre>
<p>Wie Sie bereits erfahren haben, wird beim Erzeugen eines neuen Prozesses eine Kopie erstellt (s. o.). Somit d&uuml;rfte Ihnen auch klar sein, dass der neue Kindprozess ein Ebenbild des Elternprozesses ist, was Ihnen auch an der Ausgabe der Adressen best&auml;tigt wird. Nachdem aber jetzt im Kindprozess die lokale sowie die globale Variable inkrementiert wird, werden Sie jetzt (sofern Sie keine Erfahrung diesbez&uuml;glich haben) sicherlich die Frage stellen, warum dies beim anschlie&szlig;enden Elternprozess nicht ver&auml;ndert wurde? Nein, es handelt sich hierbei nicht um ein Pufferungs- oder Synchronisationsproblem. Wie ist es also m&ouml;glich, dass trotz derselben Adresse die Werte im Elternprozess unver&auml;ndert bleiben? Und genau hierbei haben viele Anf&auml;nger der Linux-Programmierung ein Problem, das gar nicht kompliziert ist.</p>
<p>Nehmen Sie am besten diese Seiten des Buches zur Hand und legen diese auf den Kopierer (Copyright-Rechte bitte beachten), und machen Sie zwei Kopien. Beide Kopien sehen, abh&auml;ngig vom Kopierer, jetzt exakt gleich aus. Jetzt nehmen Sie eine Kopie zur Hand und bessern den Rechtschreibfehler Copyright-Rechte im Buch aus (in der Hoffnung, dass dies nicht schon von den flei&szlig;igen Lektoren gemacht wurde), hierbei kann ich auch gleich &uuml;berpr&uuml;fen, ob Sie &uuml;berhaupt noch bei der Sache sind. Jetzt haben Sie ein Blatt mit der korrigierten Fassung und eines ohne Korrektur. Zugegeben, das ist weit hergeholt, aber das Prinzip, worauf ich hinauswill, ist, dass eine Kopie eines Prozesses bedeutet, dass Sie einen weiteren Prozess erzeugt haben, der ebenfalls einen eigenen Adressraum (virtueller Speicher) besitzt. Letztendlich handelt es sich eben um zwei eigene Prozesse, was Ihnen die Ausgabe der Prozess-ID (<span class="listing">PID</span>) auch best&auml;tigt.</p>
<a name="t31"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t32"></a><h3 class="t3">7.8.1 Pufferung<a id="RxxKap07007040001FE1F021111" name="RxxKap07007040001FE1F021111"></a> 
      <a href="#t2t33"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t31"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999259" name="Xxx999259"></a>Einen nicht ganz unbedeutenden Seiteneffekt muss ich hierbei noch ansprechen. Verwenden Sie das Beispiel von oben, und leiten Sie die Ausgabe in eine Datei um.</p>
<pre>$./child &gt; out.txt</pre>
<p>Wenn Sie nun die Datei <span class="listing">out.txt</span> betrachten, wird Ihnen auffallen, dass die Reihenfolge der Ausgabe nicht mehr der entspricht, wie die, die auf der Konsole zur&uuml;ckgegeben wurde. Das Problem, das f&uuml;r sich eigentlich gar keines ist, ist die Pufferung der Daten. Da Sie hier die Ausgabe in eine Datei umleiten, wird aus Performance-Gr&uuml;nden die Vollpufferung verwendet. Wir haben hier aber auch zwei Pufferungen, da ja zwei Prozesse vorhanden sind. Jeder Prozess hat seinen eigenen Puffer. Somit schreiben sowohl Kind- als auch Elternprozess zuerst jeder in seinen eigenen Puffer, bis dieser voll ist (mindestens <span class="listing">BUFSIZ</span> Bytes) oder bis sich der Prozess beendet. Erst dann wird von zwei separaten Puffern in die Datei <span class="listing">out.txt</span> geschrieben. Wollen Sie so etwas vermeiden, k&ouml;nnen Sie entweder den unbequemen Weg mit der Funktion <span class="listing">write()</span>, die ja ungepuffert arbeitet, gehen oder den etwas bequemeren mit der Standardfunktion <span class="listing">fflush()<a id="Xxx999263" name="Xxx999263"></a></span>. Ein <span class="listing">fflush(stdout)</span> leert den Puffer der Ausgabe sofort und schreibt diesen gleich in die Datei. Im Listing sind dies vier Zeilen, die hinzugef&uuml;gt werden m&uuml;ssen:</p>
<pre><a id="Xxx999264" name="Xxx999264"></a>/* child2.c */
#include &lt;unistd. h.&gt;
#include &lt;sys/types.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
static int global_var = 1;
int main (void) {
   pid_t pid;
   int lokal_var = 1;
   switch (pid = fork ()) {
   case -1:
      printf ("Fehler bei fork()\n");
      break;
   case 0:
      sleep (1);   /* Kurze Pause */
      printf ("--- Im Kindprozess (%d) ---\n",getpid());
      printf ("global_var = %d Speicheradresse : %p\n",
                global_var, &amp;global_var);
      printf ("lokal_var  = %d Speicheradresse ; %p\n",
                lokal_var, &amp;lokal_var);
      fflush(stdout);
      ++global_var;
      ++lokal_var;
      printf ("--- Im Kindprozess (%d) ---\n",getpid());
      printf ("global_var = %d Speicheradresse : %p\n",
                global_var, &amp;global_var);
      printf ("lokal_var  = %d Speicheradresse ; %p\n",
                lokal_var, &amp;lokal_var);
      fflush(stdout);
      break;
   default:
      printf ("--- Im Elternprozess (%d) ---\n",getpid());
      printf ("global_var = %d Speicheradresse : %p\n",
                global_var, &amp;global_var);
      printf ("lokal_var  = %d Speicheradresse ; %p\n",
                lokal_var, &amp;lokal_var);
      fflush(stdout);
      sleep (2);
      printf ("--- Im Elternprozess (%d) ---\n",getpid());
      printf ("global_var = %d Speicheradresse : %p\n",
                global_var, &amp;global_var);
      printf ("lokal_var  = %d Speicheradresse ; %p\n",
                lokal_var, &amp;lokal_var);
      fflush(stdout);
      break;
   }
   return EXIT_SUCCESS;
}</pre>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td class="tabellentext" bgcolor="#000000">
<p class="BStandard"><b>Hinweis   </b>&Uuml;ber die Reihenfolge der Ausgabe von Eltern- bzw. Kindprozess haben Sie hier noch keinen Einfluss, abgesehen von der primitiven Methode mittels <span class="listing">sleep()</span>, die allerdings nicht die Prozesse synchronisiert, sondern aufh&auml;lt. F&uuml;r die Ausgabe der Reihenfolge ist ein bestimmter Algorithmus vorhanden, der hier allerdings nicht von Interesse ist. Wie Sie Prozesse aufeinander abstimmen (synchronisieren) k&ouml;nnen, erfahren Sie im Kapitel &uuml;ber Interprozesskommunikation (IPC) und die Signale.</p>
</td>
</tr>
</table><br>
<p>Nat&uuml;rlich sollte Ihnen auch klar sein, dass die Kopie dem Kindprozess entspricht, wenn der Kindprozess selbst einen weiteren Prozess erzeugt, , da ja in diesem Fall der Kindprozess der Elternprozess und der Elternprozess vom Kindprozess des Gro&szlig;elternprozesses des neu erzeugten Prozesses vom Kindprozess ist. Dann haben Sie bereits drei Generationen von Prozessen. Das Beispiel dazu zum besseren Verst&auml;ndnis:</p>
<pre><a id="Xxx999271" name="Xxx999271"></a>/* child3.c */
#include &lt;unistd. h.&gt;
#include &lt;sys/types.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
static int global_var = 1;
int main (void) {
   pid_t pid;
   int lokal_var = 1;
   switch (pid = fork ()) {
   case -1:
      printf ("Fehler bei fork()\n");
      break;
   case 0:
      sleep (1);   /* Kurze Pause */
      printf ("--- Im Kindprozess (%d) ---\n",getpid());
      printf ("global_var = %d Speicheradresse : %p\n",
                global_var, &amp;global_var);
      printf ("lokal_var  = %d Speicheradresse : %p\n",
                lokal_var, &amp;lokal_var);
      fflush(stdout);
      ++global_var;
      ++lokal_var;
      if(fork() == -1)
         printf("Fehler bei fork() (2)\n");
      else {
         printf ("--- Im (Kind-)Kindprozess(%d) ---\n",
            getpid());
         printf ("global_var = %d Speicheradresse : %p\n",
                   global_var, &amp;global_var);
         printf ("lokal_var  = %d Speicheradresse : %p\n", 
                   lokal_var, &amp;lokal_var);
         break;
      }      
      break;
   default:
      printf ("--- Im Elternprozess (%d) ---\n",getpid());
      printf ("global_var = %d Speicheradresse : %p\n",
                global_var, &amp;global_var);
      printf ("lokal_var  = %d Speicheradresse : %p\n",
                lokal_var, &amp;lokal_var);
      fflush(stdout);
      break;
   }
   return EXIT_SUCCESS;
}</pre>
<p>Das Beispiel bei der Ausf&uuml;hrung:</p>
<pre>$ gcc -o child3 child3.c
$ ./child3
--- Im Elternprozess (2512) ---
global_var = 1 Speicheradresse : 0x804982c
lokal_var  = 1 Speicheradresse : 0xbffff380
 --- Im Kindprozess (2513) ---
global_var = 1 Speicheradresse : 0x804982c
lokal_var  = 1 Speicheradresse : 0xbffff380
--- Im (Kind-)Kindprozess (2516) ---
global_var = 2 Speicheradresse : 0x804982c
lokal_var  = 2 Speicheradresse : 0xbffff380
--- Im (Kind-)Kindprozess (2513) ---
global_var = 2 Speicheradresse : 0x804982c
lokal_var  = 2 Speicheradresse : 0xbffff380</pre>
<p>Nach der Freude, dies verstanden zu haben, folgt bei dieser Ausgabe wohl gleich wieder Ern&uuml;chterung. Nat&uuml;rlich will ich Sie nicht dem Knock-out &uuml;berlassen. Auch f&uuml;r dieses Beispiel gilt wieder der Satz vom Anfang: Mit <span class="listing">fork()</span> erzeugen Sie eine Kopie des aktuellen Prozesses. Und der <span class="listing">fork()</span>-Aufruf im Kindprozess (hier mit der PID 2513) erzeugt nun mal mit dem <span class="listing">fork()</span>-Aufruf eine Kopie von sich selbst, und diese beinhaltet ja im Code einen weiteren <span class="listing">fork()</span>-Aufruf, womit automatisch und logischerweise ein weiterer Prozess gestartet wird. Dies kann bei mehreren <span class="listing">fork()</span>-Aufrufen hintereinander sehr komplex und un&uuml;bersichtlich werden. Hierzu ein Beispiel:</p>
<pre><a id="Xxx999276" name="Xxx999276"></a>/* child4.c */
#include &lt;unistd. h.&gt;
#include &lt;sys/types.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#define MAX 4094
int main (void) {
   char log[MAX];   
   printf("1.fork()\n");   fflush(stdout);
   fork();
   printf("2.fork()\n");   fflush(stdout);
   fork();
   printf("3.fork()\n");   fflush(stdout);
   fork();   
   sleep(2);   
   snprintf(log, MAX, "PID:%d PPID:%d\n",
      getpid(), getppid());
   printf("%s",log);
   fflush(stdout);   
   return EXIT_SUCCESS;
}</pre>
<p>So sieht´s aus:</p>
<pre>$ gcc -o child4 child4.c
$ ./child4
1.fork()
2.fork()
3.fork()
3.fork()
2.fork()
3.fork()
3.fork()
PID:2873 PPID:2866
PID:2866 PPID:1958
PID:2870 PPID:2867
PID:2867 PPID:1
PID:2872 PPID:2871
PID:2871 PPID:1
PID:2869 PPID:2868
PID:2868 PPID:1</pre>
<p>Sie sehen hier, dass der erste <span class="listing">fork()</span>-Aufruf nur einmal, der zweite zweimal und der dritte bereits viermal aufgerufen wird.</p>
<a name="t32"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t33"></a><h3 class="t3">7.8.2 Was wird vererbt und was nicht?<a id="RxxKap07007040001FE1F02117D" name="RxxKap07007040001FE1F02117D"></a> 
      <a href="#t2t34"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t32"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999282" name="Xxx999282"></a>Hiermit m&ouml;chte ich die Gelegenheit wahrnehmen aufzulisten, was die Kinder alles so von ihren Eltern vererbt bekommen.</p>
<h4 class="t4">Das bekommen die Kinder von ihren Eltern ...</h4>
<p>... alle offenen Filedeskriptoren. Daher sollten Sie stets darauf achten, wenn beide Prozesse um eine Datei schreibend ringen. Aber dazu wird in der Interprozesskommunikation noch ausf&uuml;hrlich eingegangen.</p>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Arbeits- und Wurzelverzeichnis</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Dateierstellungsmaske</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Signalmaske und Handler</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"><span class="listing"> UID</span>, <span class="listing">EUID</span>, <span class="listing">GID</span>, <span class="listing">EGID</span>, Prozessgruppen-, Session-, Setuser- und Setgroup-ID etc.</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Steuerterminal (<span class="listing">CTTY</span>)</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Umgebungsvariablen</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Ressourcenlimits</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Shared-Memory-Segmente (sofern verwendet)</td>
</tr>
</table>
<h4 class="t4">... und das bekommen die Kinder NICHT von ihren Eltern vererbt ...</h4>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Prozess-ID (<span class="listing">PID</span>) und Elternprozess-ID (<span class="listing">PPID</span>)</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> die Dateisperren (Lockings)</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Zeitschaltuhren, die z. B. mit <span class="listing">alarm()</span> gesetzt wurden</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> noch nicht ausgef&uuml;hrte Signale (h&auml;ngende Signale)</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Die Zeiten <span class="listing">utime</span>, <span class="listing">stime</span>, <span class="listing">cutime</span> und <span class="listing">ustime</span> werden beim Kindprozess auf 0 gesetzt.</td>
</tr>
</table>
<a name="t33"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t34"></a><h3 class="t3">7.8.3 Einen Prozess mit ver&auml;nderter Priorit&auml;t erzeugen<a id="RxxKap07007040001FE1F02118F" name="RxxKap07007040001FE1F02118F"></a> 
      <img src="common/15x15leer.gif" width="15" height="15" border="0" alt="top"><a href="#t2t33"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999301" name="Xxx999301"></a>Auf das Ver&auml;ndern und Abfragen der Prozesspriorit&auml;t wurde bereits ausf&uuml;hrlich eingegangen. Wollen Sie jetzt einen Prozess mit verringerter (oder eventuell erh&ouml;hter) CPU-Priorit&auml;t ausf&uuml;hren, m&uuml;ssen Sie lediglich mit <span class="listing">fork()</span> einen neuen Kindprozess starten, mit der Funktion <span class="listing">setpriority()<a id="Xxx999303" name="Xxx999303"></a></span> im Elternprozess entsprechende Priorit&auml;ten vergeben und diesen mithilfe einer <span class="listing">exec*</span>-Funktion (mehr zu den <span class="listing">exec*</span>-Funktionen in K&uuml;rze) &uuml;berlagern. Beachten Sie allerdings, dass ein Erh&ouml;hen der Priorit&auml;t nur mit Superuser-Rechten m&ouml;glich ist.</p>
<p>Im folgenden Beispiel wird das Programm mit dem Makro <span class="listing">PROGRAMM</span> im Kindprozess mithilfe von <span class="listing">execvp()</span> &uuml;berlagert und im Elternprozess mit der Funktion <span class="listing">setpriority()</span> auf die Priorit&auml;t gesetzt, die mit dem Makro <span class="listing">PRIORITY</span> angegeben wird. Passen Sie die Angaben der beiden Makros <span class="listing">PROGRAMM</span> und <span class="listing">PRIORITY</span> bitte Ihren Bed&uuml;rfnissen an. Im Beispiel wird find mit der niedrigsten Priorit&auml;t ausgef&uuml;hrt. Nat&uuml;rlich k&ouml;nnen dabei weitere Argumente aus der Kommandozeile f&uuml;r find mit &uuml;bergeben werden, die ebenfalls ausgewertet und verwendet werden.</p>
<pre><a id="Xxx999305" name="Xxx999305"></a>/* prio_child.c */
#include &lt;stdlib.h&gt;
#include &lt;unistd. h.&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/time.h&gt;
#include &lt;sys/resource.h&gt;
/* Bitte anpassen */
#define PROGRAM "/usr/bin/find"
/* Bitte anpassen */
#define PRIORITY 19
/* Max. Argumente aus der Kommandozeile */
#define MAX_ARGS 1024
int main (int argc, char **argv) {
   int i;
   pid_t pid;
   char *args[MAX_ARGS + 1] = { PROGRAM, NULL };
   seteuid (getuid ());  /* Privilegien entfernen */
    /* Argumente kopieren */   
    for (i = 1; i &lt; argc &amp;&amp; i &lt; MAX_ARGS; i++)   
      args[i] = argv[i];
   args[i] = NULL;
   /* Neuen Prozess f&uuml;r PROGRAMM erzeugen */
   pid = fork ();   
   if (pid == 0) {
      /* neuen Prozess PROGRAMM starten */
      execvp (PROGRAM, args);   
   }
   else {   
      /* Privilegien wieder einf&uuml;hren */
      seteuid (0); 
      /* Priorit&auml;t f&uuml;r PROGRAMM (pid) auf PRIORITY setzen */
      setpriority (PRIO_PROCESS, pid, PRIORITY);
   }
   return EXIT_SUCCESS;
}</pre>
<p>Das Programm bei der Ausf&uuml;hrung:</p>
<pre>$ gcc –o prio_child prio_child.c
$ ./prio_child /home -name child\*
/home/tot/Kap6/child
/home/tot/Kap6/child2.c
/home/tot/Kap6/child3.c
/home/tot/Kap6/child4.c
/home/tot/Kap6/child2
/home/tot/Kap6/child3
/home/tot/Kap6/child4
/home/tot/Kap6/child.c
/home/tot/backups/21_April_04/Listings/kap5/child1.c
/home/tot/backups/21_April_04/Listings/kap5/child2.c
/home/tot/backups/21_April_04/Listings/kap5/child3.c
/home/tot/backups/21_April_04/Listings/kap5/child.c</pre>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="100%" class="start" colspan="1" height="22" align="center">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20%"><a class="navnav" href="Kap07-006.html"> &lt;&lt; zur&uuml;ck</a></td>
<td width="59%">
<div align="center"><a class="navnav" href="#">&lt;top&gt;</a></div>
</td>
<td align="right" width="20%">
<div align="right"><a class="navnav" href="Kap07-008.html">vor &gt;&gt; </a></div>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</td>
<td width="10" valign="top">&nbsp;&nbsp;</td>
<td width="160" valign="top">
    <table border="0" cellpadding="0" cellspacing="0" width="160">
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2">
                            &nbsp;<a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navs">
                            <strong>Zum Katalog</strong></a>
                        </td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2">
                            <img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td><a href="https://www.rheinwerk-verlag.de/linux-unix-programmierung_1137/?GPP=oplup">
                                        <img src="common/749.gif"  border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-UNIX-Programmierung" title="Zum Katalog: Linux-UNIX-Programmierung">
                                        <br /><strong>Linux-UNIX-<br />Programmierung</strong><br /><img src="common/pfeil_rechts5.gif" border="0" alt="">bestellen</a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2"><strong>&nbsp;Ihre Meinung?</strong></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td>Wie hat Ihnen das &lt;openbook&gt; gefallen?<br /><a href="https://www.rheinwerk-verlag.de/feedback/"><img src="common/pfeil_rechts5.gif" border="0" alt="">Ihre Meinung</a>
                                    <br /><br /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2">&nbsp;<a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navs"><strong>Buchtipps</strong></a></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux-server_3685/?GPP=oplup">
                        <img src="common/3020.gif" width="78" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-Server" title="Zum Katalog: Linux-Server"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux-Server</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/das-komplettpaket-lpic-1-lpic-2_3782/?GPP=oplup">
                        <img src="common/3529.gif" width="70" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Das Komplettpaket LPIC-1 &amp; LPIC-2" title="Zum Katalog: Das Komplettpaket LPIC-1 &amp; LPIC-2"><br /><br /><br /><br /><br /><br /><br />&nbsp;Das Komplettpaket<br />&nbsp;LPIC-1 &amp; LPIC-2</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux-hochverfugbarkeit_3420/?GPP=oplup">
                        <img src="common/2542.gif" width="70" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-Hochverfügbarkeit" title="Zum Katalog: Linux-Hochverfügbarkeit"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux-<br />&nbsp;Hochverfügbarkeit</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/shell-programmierung_3345/?GPP=oplup">
                        <img src="common/2310.gif" width="69" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Shell-Programmierung" title="Zum Katalog: Shell-Programmierung"><br /><br /><br /><br /><br /><br /><br />&nbsp;Shell-<br />&nbsp;Programmierung</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux_3436/?GPP=oplup">
                        <img src="common/2591.gif" width="79" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux Handbuch" title="Zum Katalog: Linux Handbuch"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux Handbuch</a><br /><br /></td>
                    </tr>
                </table></td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2"><strong>&nbsp;Shopping</strong></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td><b>Versandkostenfrei</b> bestellen in Deutschland und &Ouml;sterreich<br /><a href="https://www.rheinwerk-verlag.de/hilfe/bestellung_6?GPP=oplup"><img src="common/pfeil_rechts5.gif" border="0" alt="">Info</a><br /><br /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</td>
</tr>
</table>
<br /><br />
<hr width="70%" align="center">
<br />
<div align="center">
    <p class="standard">
        <strong>Copyright © Rheinwerk Verlag GmbH 2006</strong>
        <br />F&uuml;r Ihren privaten Gebrauch d&uuml;rfen Sie die Online-Version nat&uuml;rlich 
        ausdrucken. Ansonsten unterliegt das &lt;openbook&gt; denselben Bestimmungen, 
        wie die gebundene Ausgabe: Das Werk einschlie&szlig;lich aller seiner Teile ist 
        urheberrechtlich gesch&uuml;tzt. Alle Rechte vorbehalten einschlie&szlig;lich der 
        Vervielf&auml;ltigung, &Uuml;bersetzung, Mikroverfilmung sowie Einspeicherung und 
        Verarbeitung in elektronischen Systemen.
    </p>
    <br><a href="https://www.rheinwerk-verlag.de/">[Rheinwerk Computing]</a>
    <br /><br />Rheinwerk Verlag GmbH, Rheinwerkallee 4, 53227 Bonn, 
    Tel.: 0228.42150.0, Fax 0228.42150.77, 
    <a href="mailto:service@rheinwerk-verlag.de">service@rheinwerk-verlag.de</a>
</div>
<br /><br />
</body>

<!-- Mirrored from openbook.rheinwerk-verlag.de/linux_unix_programmierung/Kap07-007.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 19:57:10 GMT -->
</html>
